import{i as M,j as e,a as ae,B as h,c as z,T as A,a6 as T,y as K,I as G,w as X,a7 as Y,f as J,g as Z,h as Q,D as ee,l as oe,a8 as le,a9 as te}from"./mui-Bdma285X.js";import{r as k,b as N}from"./vendor-gvDtyKy-.js";import{r as L}from"./index-Cub88VPS.js";import{u as ce}from"./useNpmPackages-DzRp6mmi.js";import"./router-BuU8Rm5e.js";var B={},de=M;Object.defineProperty(B,"__esModule",{value:!0});var W=B.default=void 0,pe=de(L()),ue=e;W=B.default=(0,pe.default)((0,ue.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh");var U={},he=M;Object.defineProperty(U,"__esModule",{value:!0});var D=U.default=void 0,me=he(L()),fe=e;D=U.default=(0,me.default)((0,fe.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew");var q={},ge=M;Object.defineProperty(q,"__esModule",{value:!0});var se=q.default=void 0,be=ge(L()),xe=e;se=q.default=(0,be.default)((0,xe.jsx)("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline");var V={},ye=M;Object.defineProperty(V,"__esModule",{value:!0});var ie=V.default=void 0,ve=ye(L()),je=e;ie=V.default=(0,ve.default)((0,je.jsx)("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"}),"FormatListBulleted");const we="vaporjawn",ke=1e3*60*10,$e="gh_activity_v1";function _e(t){const{type:m,created_at:f,repo:g}=t,a=g?.name||"unknown",y=f,d={id:t.id,repo:a,createdAt:y,url:void 0};let i="other",o=m,l;switch(m){case"PushEvent":{i="push";const p=Array.isArray(t.payload?.commits)?t.payload.commits.length:0,u=t.payload?.ref?.split("/").pop();o=`Pushed ${p} commit${p===1?"":"s"} to ${u||"main"}`,l=`https://github.com/${a}/commits/${u||"main"}`;break}case"PullRequestEvent":{const p=t.payload?.action,u=t.payload?.number||t.payload?.pull_request?.number;l=t.payload?.pull_request?.html_url,p==="opened"?(i="pr-open",o=`Opened PR #${u} in ${a}`):p==="closed"&&t.payload?.pull_request?.merged?(i="pr-merge",o=`Merged PR #${u} in ${a}`):(i="other",o=`PR ${p} #${u} in ${a}`);break}case"ReleaseEvent":{i="release";const p=t.payload?.release?.tag_name;l=t.payload?.release?.html_url,o=`Published release ${p||"(untagged)"} in ${a}`;break}case"ForkEvent":{i="fork",l=t.payload?.forkee?.html_url,o=`Forked ${a}`;break}case"WatchEvent":{i="star",o=`Starred ${a}`,l=`https://github.com/${a}`;break}case"IssuesEvent":{const p=t.payload?.action,u=t.payload?.issue?.number;l=t.payload?.issue?.html_url,p==="opened"?(i="issue-open",o=`Opened issue #${u} in ${a}`):(i="other",o=`Issue ${p} #${u} in ${a}`);break}case"IssueCommentEvent":{i="issue-comment";const p=t.payload?.issue?.number;l=t.payload?.comment?.html_url||t.payload?.issue?.html_url,o=`Commented on issue #${p} in ${a}`;break}default:i="other",o=m.replace(/Event$/,"")+` in ${a}`,l=`https://github.com/${a}`}return{...d,kind:i,message:o,url:l}}function Se(t={}){const{username:m=we,perPage:f=30,cacheTtlMs:g=ke,includeTypes:a}=t,[y,d]=k.useState([]),[i,o]=k.useState(!1),[l,p]=k.useState(null),u=k.useRef(!1),P=`${$e}_${m}_${f}`,$=k.useCallback(()=>{try{const c=localStorage.getItem(P);if(!c)return null;const x=JSON.parse(c);return!x.fetchedAt||!Array.isArray(x.data)?null:x}catch{return null}},[P]),n=k.useCallback(c=>{try{const x={fetchedAt:Date.now(),data:c};localStorage.setItem(P,JSON.stringify(x))}catch{}},[P]),b=k.useCallback(async(c=!1)=>{if(!u.current){u.current=!0,o(!0),p(null);try{const x=`https://api.github.com/users/${encodeURIComponent(m)}/events/public?per_page=${f}`,r=await fetch(x,{headers:{Accept:"application/vnd.github+json"}});if(!r.ok)throw new Error(`GitHub activity failed (${r.status})`);let j=(await r.json()).map(_e);a&&a.length&&(j=j.filter(w=>a.includes(w.kind))),j.sort((w,S)=>new Date(S.createdAt).getTime()-new Date(w.createdAt).getTime()),d(j),n(j)}catch(x){c||(x instanceof Error?p(x.message):p("Failed to load GitHub activity"))}finally{o(!1),u.current=!1}}},[m,f,a,n]);k.useEffect(()=>{const c=$();if(c){const x=Date.now()-c.fetchedAt<g;d(c.data),x||b()}else b()},[g,$,b]);const E=k.useCallback(()=>{b(!0)},[b]);return{events:y,loading:i,error:l,refresh:E}}const re=["#14b8a6","#6366f1","#f59e0b","#ec4899","#0ea5e9","#84cc16","#f43f5e","#8b5cf6"];function Re(t){return re[t%re.length]}const Ae=({events:t,maxRepos:m=12,heightPerNode:f=46,legendId:g="activity-legend",orientation:a="desc",showDates:y=!0})=>{const d=ae(),{lanes:i,rows:o,trunkLane:l,accessibleList:p}=k.useMemo(()=>{if(!t.length)return{lanes:[],rows:[],trunkLane:void 0,accessibleList:[]};const r=[...t].sort((s,R)=>new Date(s.createdAt).getTime()-new Date(R.createdAt).getTime());a==="desc"&&r.reverse();const _=[],j=[],w=new Set;r.forEach(s=>{s.lane==="GitHub"&&s.repo?_.includes(s.repo)||_.push(s.repo):s.lane&&s.lane!=="GitHub"&&(w.has(s.lane)||(w.add(s.lane),j.push(s.lane)))});const S=["GitHub",..._,...j],I=new Map;S.slice(0,m).forEach((s,R)=>I.set(s,{label:s,color:Re(R),index:R}));const O=I.get("GitHub"),C=[];let v;r.forEach(s=>{const R=s.createdAt.slice(0,10);y&&R!==v&&(C.push({type:"date",date:R}),v=R);let H;s.lane==="GitHub"&&s.repo?H=s.repo:s.lane==="GitHub"?H="GitHub":H=s.lane||s.repo||"Misc",C.push({type:"event",evt:s,laneKey:H,lane:I.get(H)})});const F=C.filter(s=>s.type==="event").map(s=>{const R=s.evt,H=s.laneKey;return`${R.createdAt} – ${H}: ${R.message}`});return{lanes:S.slice(0,m).map(s=>I.get(s)),rows:C,trunkLane:O,accessibleList:F}},[t,m,a,y]),u=36,P=52,$=30,n=16,b=$/2,E=n/2,c=o.length*f+16,x={push:"Push","pr-open":"PR Opened","pr-merge":"PR Merged",release:"Release",fork:"Fork",star:"Star","issue-open":"Issue Opened","issue-comment":"Issue Comment","npm-publish":"npm Publish"};return e.jsxs(h,{sx:{position:"relative",width:"100%",overflowX:"auto",py:2},children:[e.jsx(h,{sx:{display:"flex",flexDirection:"row",pl:P,mb:1},children:i.map(r=>{const _=r.label==="GitHub";return e.jsx(h,{sx:{width:u,mr:3,textAlign:"center",fontSize:10,color:r.color,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:_?700:500,position:"relative","&:after":_?{content:'"trunk"',position:"absolute",left:0,right:0,top:"100%",fontSize:8,letterSpacing:.5,opacity:.55}:void 0},title:r.label.split("/").pop(),children:r.label==="GitHub"?"GitHub":r.label.split("/").pop()},r.label)})}),e.jsxs(h,{sx:{position:"relative",height:c,pl:P},children:[l&&e.jsx(h,{sx:{position:"absolute",left:l.index*(u+12)+u/2,top:0,bottom:0,width:2,bgcolor:d.palette.mode==="dark"?"rgba(255,255,255,0.18)":"rgba(0,0,0,0.18)"}}),o.map((r,_)=>{const j=_*f+8;if(r.type==="date")return e.jsx(h,{sx:{position:"absolute",left:0,top:j-10,height:f,display:"flex",alignItems:"center",fontSize:11,fontWeight:600,color:"text.secondary"},children:r.date},`date-${r.date}-${_}`);if(!r.evt)return null;const{lane:w}=r,S=l?l.index*(u+12)+u/2:0,I=w?w.index*(u+12)+u/2:S,O=(()=>{switch(r.evt.kind){case"push":return"⬆";case"pr-open":return"PR";case"pr-merge":return"M";case"release":return"⛓";case"fork":return"⑂";case"star":return"★";case"issue-open":return"◻";case"issue-comment":return"💬";case"npm-publish":return"📦";default:return"●"}})(),C=x[r.evt.kind]||r.evt.kind.charAt(0).toUpperCase()+r.evt.kind.slice(1),v=w?.label==="GitHub";return e.jsxs(N.Fragment,{children:[!v&&e.jsx(h,{sx:{position:"absolute",left:Math.min(S,I),top:j,width:Math.abs(I-S),height:2,bgcolor:w?.color||"divider",opacity:.55,pointerEvents:"none"}}),l&&e.jsx(h,{sx:{position:"absolute",left:S-E,top:j-E,width:n,height:n,borderRadius:"50%",backgroundColor:d.palette.background.paper,border:`2px solid ${d.palette.divider}`,boxSizing:"border-box",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:600,color:"text.secondary"},"aria-hidden":"true"}),e.jsx(z,{title:`${r.evt.message}
${C} • ${r.evt.repo||r.evt.lane||"GitHub"}`,children:e.jsx(h,{component:r.evt.url?"a":"div",href:r.evt.url,target:r.evt.url?"_blank":void 0,rel:r.evt.url?"noopener noreferrer":void 0,"aria-label":`${C} event in ${r.evt.repo||r.evt.lane||"GitHub"} : ${r.evt.message}`,"aria-describedby":g,tabIndex:0,sx:{position:"absolute",left:I-(v?E:b),top:j-(v?E:b),width:v?n:$,height:v?n:$,borderRadius:"50%",backgroundColor:v?d.palette.primary.main:w?.color||d.palette.secondary.main,color:d.palette.getContrastText(v?d.palette.primary.main:w?.color||d.palette.secondary.main),fontSize:v?9:12,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none",boxShadow:F=>`0 0 0 2px ${F.palette.background.default}, 0 3px 6px rgba(0,0,0,0.45)`,transition:"transform .15s, box-shadow .15s","&:hover":{transform:"scale(1.15)"},"&:focus-visible":{outline:"2px solid #fff",outlineOffset:3,transform:"scale(1.15)"}},children:O})}),e.jsxs(h,{sx:{position:"absolute",left:Math.max(I,S)+(v?E:b)+10,top:j-(v?E:b)+2,minHeight:(v?n:$)-4,display:"flex",alignItems:"center",fontSize:12,pr:2,maxWidth:`calc(100% - ${Math.max(I,S)+(v?E:b)+32}px)`,color:"text.secondary",lineHeight:1.2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",pointerEvents:"none"},"aria-hidden":"true",children:[r.evt.message,e.jsxs(h,{component:"span",sx:{ml:.75,opacity:.55,fontSize:11},children:["(",C,")"]})]})]},r.evt.id)}),e.jsx(h,{component:"ol","aria-label":"Activity chronological list",sx:{position:"absolute",left:-9999,width:1,height:1,overflow:"hidden",p:0,m:0},children:p.map((r,_)=>e.jsx("li",{children:r},_))})]})]})},Ee=[{label:"Push",glyph:"⬆",description:"Code pushed to a repository"},{label:"PR Opened",glyph:"PR",description:"Pull request opened"},{label:"PR Merged",glyph:"M",description:"Pull request merged"},{label:"Release",glyph:"⛓",description:"Release / tag published"},{label:"Fork",glyph:"⑂",description:"Repository forked"},{label:"Star",glyph:"★",description:"Repository starred"},{label:"Issue Opened",glyph:"◻",description:"Issue created"},{label:"Issue Comment",glyph:"💬",description:"Issue or PR comment"},{label:"npm Publish",glyph:"📦",description:"Package version published to npm"}],Ie=()=>e.jsxs(h,{component:"section","aria-labelledby":"activity-legend-heading",id:"activity-legend",sx:{mt:3,p:2,borderRadius:2,border:t=>`1px solid ${t.palette.divider}`,background:t=>t.palette.mode==="dark"?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)"},children:[e.jsx(A,{id:"activity-legend-heading",variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Activity Graph Legend"}),e.jsxs(A,{variant:"caption",component:"p",sx:{mb:2,lineHeight:1.4},children:["The first lane is the GitHub trunk. Each GitHub repository branches horizontally from the trunk on the row of its first visible event; connectors show the relationship. The separate ",e.jsx("strong",{children:"npm"})," lane lists package publish events. Hover or focus bubbles for details."]}),e.jsx(T,{direction:"row",flexWrap:"wrap",spacing:1.5,useFlexGap:!0,children:Ee.map(t=>e.jsxs(T,{direction:"row",spacing:.75,alignItems:"center",sx:{minWidth:140},children:[e.jsx(h,{"aria-hidden":!0,sx:{width:22,height:22,borderRadius:"50%",bgcolor:"action.hover",display:"flex",alignItems:"center",justifyContent:"center",fontSize:11,fontWeight:700},children:t.glyph}),e.jsxs(h,{sx:{fontSize:11,lineHeight:1.2},children:[e.jsx("strong",{children:t.label}),e.jsx(h,{component:"span",sx:{ml:.5,opacity:.65},children:t.description})]})]},t.label))})]});function ne(t){try{const m=new Date(t);let g=Date.now()-m.getTime();const a=g<0;g=Math.abs(g);const y=Math.floor(g/1e3);if(y<45)return a?"in a few sec":"just now";const d=Math.floor(y/60);if(d<60)return a?`in ${d}m`:`${d}m ago`;const i=Math.floor(d/60);if(i<24)return a?`in ${i}h`:`${i}h ago`;const o=Math.floor(i/24);if(o<7)return a?`in ${o}d`:`${o}d ago`;const l=Math.floor(o/7);return l<5?a?`in ${l}w`:`${l}w ago`:m.toLocaleDateString(void 0,{month:"short",day:"numeric",year:new Date().getFullYear()===m.getFullYear()?void 0:"numeric"})}catch{return""}}const ze=()=>{const t=ae(),{events:m,loading:f,error:g,refresh:a}=Se(),{packages:y,loading:d,error:i,refresh:o}=ce(),l="https://www.npmjs.com/~vaporjawn",[p,u]=k.useState("graph"),P=k.useCallback((n,b)=>{b&&u(b)},[]),$=k.useMemo(()=>{const n=new Date().toISOString(),b=y.map(c=>({id:`npm:${c.name}@${c.version}:${c.publishedAt||"no-date"}`,createdAt:c.publishedAt||n,message:`${c.name} v${c.version} published`,kind:"npm-publish",lane:"npm",url:c.npmUrl}));return[...m.map(c=>({...c,lane:"GitHub"})),...b].sort((c,x)=>new Date(x.createdAt).getTime()-new Date(c.createdAt).getTime())},[m,y]);return e.jsxs(h,{sx:{maxWidth:1200,mx:"auto",px:{xs:2,md:3},py:{xs:4,md:6}},children:[e.jsx(A,{variant:"h3",fontWeight:700,gutterBottom:!0,children:"Activity"}),e.jsx(A,{variant:"body1",sx:{opacity:.75,mb:4},children:"A unified timeline of my open-source work. npm publishes appear first, with a commit‑style graph of GitHub repository activity."}),e.jsx(K,{elevation:3,sx:{p:{xs:2,md:4},borderRadius:4,background:t.palette.mode==="dark"?"linear-gradient(135deg, rgba(255,255,255,0.035), rgba(255,255,255,0.018))":"linear-gradient(135deg, rgba(0,0,0,0.012), rgba(0,0,0,0.03))",backdropFilter:"blur(10px)"},children:e.jsxs(T,{spacing:2,children:[e.jsxs(T,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(A,{variant:"h5",fontWeight:600,component:"h2",children:"npm Packages"}),e.jsxs(T,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(z,{title:"Refresh",children:e.jsx("span",{children:e.jsx(G,{"aria-label":"refresh npm packages",size:"small",onClick:o,disabled:d,children:e.jsx(W,{fontSize:"small"})})})}),e.jsx(z,{title:"Open npm profile",children:e.jsx(G,{"aria-label":"open npm profile",size:"small",component:"a",href:l,target:"_blank",rel:"noopener noreferrer",children:e.jsx(D,{fontSize:"small"})})})]})]}),e.jsx(A,{variant:"body2",sx:{opacity:.8},children:"Recently published / updated packages."}),d&&e.jsx(h,{display:"flex",justifyContent:"center",py:3,children:e.jsx(X,{size:26})}),i&&!d&&e.jsxs(Y,{severity:"error",children:["Failed to load npm packages: ",i]}),!d&&!i&&e.jsxs(J,{dense:!0,"aria-label":"Recent npm packages",sx:{width:"100%"},children:[y.slice(0,8).map(n=>e.jsxs(N.Fragment,{children:[e.jsx(Z,{disableGutters:!0,secondaryAction:n.npmUrl?e.jsx(G,{edge:"end","aria-label":"open package",size:"small",href:n.npmUrl,target:"_blank",rel:"noopener noreferrer",children:e.jsx(D,{fontSize:"inherit"})}):null,children:e.jsx(Q,{primary:`${n.name} @ ${n.version}`,secondary:[n.description||"",n.publishedAt?` • ${ne(n.publishedAt)}`:"",typeof n.weeklyDownloads=="number"?` • ${n.weeklyDownloads.toLocaleString()} downloads/week`:""].filter(Boolean).join(""),primaryTypographyProps:{variant:"body2"},secondaryTypographyProps:{variant:"caption"}})}),e.jsx(ee,{component:"li",sx:{opacity:.2}})]},n.name)),y.length===0&&e.jsx(A,{variant:"body2",sx:{opacity:.6,mt:1},children:"No published packages."})]}),e.jsx(oe,{variant:"outlined",color:"primary",href:l,target:"_blank",rel:"noopener noreferrer",sx:{alignSelf:"flex-start"},children:"View All on npm"})]})}),e.jsxs(K,{elevation:5,sx:{mt:6,p:{xs:2,md:4},borderRadius:4,background:t.palette.mode==="dark"?"linear-gradient(135deg, rgba(255,255,255,0.045), rgba(255,255,255,0.025))":"linear-gradient(135deg, rgba(0,0,0,0.018), rgba(0,0,0,0.04))",backdropFilter:"blur(10px)"},children:[e.jsxs(T,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[e.jsx(A,{variant:"h5",fontWeight:600,component:"h2",children:"GitHub Activity"}),e.jsxs(T,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(z,{title:"Refresh",children:e.jsx("span",{children:e.jsx(G,{"aria-label":"refresh github activity",size:"small",onClick:a,disabled:f,children:e.jsx(W,{fontSize:"small"})})})}),e.jsxs(le,{size:"small",exclusive:!0,value:p,onChange:P,"aria-label":"github activity view mode",children:[e.jsx(te,{value:"graph","aria-label":"graph view",children:e.jsx(se,{fontSize:"small"})}),e.jsx(te,{value:"list","aria-label":"list view",children:e.jsx(ie,{fontSize:"small"})})]}),e.jsx(z,{title:"Open GitHub profile",children:e.jsx(G,{"aria-label":"open github profile",size:"small",component:"a",href:"https://github.com/Vaporjawn",target:"_blank",rel:"noopener noreferrer",children:e.jsx(D,{fontSize:"small"})})})]})]}),f&&e.jsx(h,{display:"flex",justifyContent:"center",py:4,children:e.jsx(X,{size:28})}),g&&!f&&e.jsxs(Y,{severity:"error",sx:{mb:2},children:["Failed to load GitHub activity: ",g]}),!f&&!g&&p==="graph"&&e.jsxs(h,{sx:{mt:1},children:[e.jsx(Ae,{events:$,maxRepos:8,heightPerNode:40}),e.jsx(Ie,{}),$.length===0&&e.jsx(A,{variant:"body2",sx:{opacity:.6,mt:1},children:"No recent activity."})]}),!f&&!g&&p==="list"&&e.jsxs(J,{dense:!0,"aria-label":"Recent GitHub / npm activity list",sx:{width:"100%"},children:[$.slice(0,32).map(n=>e.jsxs(N.Fragment,{children:[e.jsx(Z,{disableGutters:!0,secondaryAction:n.url?e.jsx(G,{edge:"end","aria-label":"open event",size:"small",href:n.url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(D,{fontSize:"inherit"})}):null,children:e.jsx(Q,{primary:n.message,secondary:`${n.lane}${n.repo?` • ${n.repo}`:""} • ${ne(n.createdAt)}`,primaryTypographyProps:{variant:"body2"},secondaryTypographyProps:{variant:"caption"}})}),e.jsx(ee,{component:"li",sx:{opacity:.2}})]},n.id)),$.length===0&&e.jsx(A,{variant:"body2",sx:{opacity:.6,mt:1},children:"No recent activity."})]})]}),e.jsxs(A,{variant:"body2",sx:{mt:4,opacity:.7},children:["GitHub and npm sections use local caching with background refresh to reduce API calls while keeping activity reasonably fresh. (",m.length," GitHub events / ",y.length," packages)"]})]})};export{ze as default};
