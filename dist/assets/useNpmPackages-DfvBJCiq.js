import{r,a as N,g as O,_ as D,am as I,b as x,u as M,j as W,s as E,c as G,R as _,d as P,a6 as S}from"./index-DLPj7UvP.js";import{a as L}from"./colorManipulator-DoXiYzej.js";import"./react-is.production.min-DSf3zZfm.js";function V(t){return r.Children.toArray(t).filter(e=>r.isValidElement(e))}function H(t){return O("MuiToggleButton",t)}const A=N("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),U=r.createContext({}),F=r.createContext(void 0);function J(t,e){return e===void 0||t===void 0?!1:Array.isArray(e)?e.indexOf(t)>=0:t===e}const K=["value"],Y=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],q=t=>{const{classes:e,fullWidth:o,selected:s,disabled:p,size:b,color:m}=t,C={root:["root",s&&"selected",p&&"disabled",o&&"fullWidth",`size${_(b)}`,m]};return P(C,H,e)},Q=E(S,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,e[`size${_(o.size)}`]]}})(({theme:t,ownerState:e})=>{let o=e.color==="standard"?t.palette.text.primary:t.palette[e.color].main,s;return t.vars&&(o=e.color==="standard"?t.vars.palette.text.primary:t.vars.palette[e.color].main,s=e.color==="standard"?t.vars.palette.text.primaryChannel:t.vars.palette[e.color].mainChannel),x({},t.typography.button,{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active},e.fullWidth&&{width:"100%"},{[`&.${A.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:L(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${A.selected}`]:{color:o,backgroundColor:t.vars?`rgba(${s} / ${t.vars.palette.action.selectedOpacity})`:L(o,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${s} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:L(o,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${s} / ${t.vars.palette.action.selectedOpacity})`:L(o,t.palette.action.selectedOpacity)}}}},e.size==="small"&&{padding:7,fontSize:t.typography.pxToRem(13)},e.size==="large"&&{padding:15,fontSize:t.typography.pxToRem(15)})}),dt=r.forwardRef(function(e,o){const s=r.useContext(U),{value:p}=s,b=D(s,K),m=r.useContext(F),C=I(x({},b,{selected:J(e.value,p)}),e),$=M({props:C,name:"MuiToggleButton"}),{children:R,className:g,color:T="standard",disabled:h=!1,disableFocusRipple:c=!1,fullWidth:z=!1,onChange:y,onClick:u,selected:w,size:l="medium",value:n}=$,B=D($,Y),v=x({},$,{color:T,disabled:h,disableFocusRipple:c,fullWidth:z,size:l}),k=q(v),i=f=>{u&&(u(f,n),f.defaultPrevented)||y&&y(f,n)},d=m||"";return W.jsx(Q,x({className:G(b.className,k.root,g,d),disabled:h,focusRipple:!c,ref:o,onClick:i,onChange:y,value:n,ownerState:v,"aria-pressed":w},B,{children:R}))});function X(t){return O("MuiToggleButtonGroup",t)}const a=N("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),Z=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],tt=t=>{const{classes:e,orientation:o,fullWidth:s,disabled:p}=t,b={root:["root",o==="vertical"&&"vertical",s&&"fullWidth"],grouped:["grouped",`grouped${_(o)}`,p&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return P(b,X,e)},et=E("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[{[`& .${a.grouped}`]:e.grouped},{[`& .${a.grouped}`]:e[`grouped${_(o.orientation)}`]},{[`& .${a.firstButton}`]:e.firstButton},{[`& .${a.lastButton}`]:e.lastButton},{[`& .${a.middleButton}`]:e.middleButton},e.root,o.orientation==="vertical"&&e.vertical,o.fullWidth&&e.fullWidth]}})(({ownerState:t,theme:e})=>x({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},t.orientation==="vertical"&&{flexDirection:"column"},t.fullWidth&&{width:"100%"},{[`& .${a.grouped}`]:x({},t.orientation==="horizontal"?{[`&.${a.selected} + .${a.grouped}.${a.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${a.selected} + .${a.grouped}.${a.selected}`]:{borderTop:0,marginTop:0}})},t.orientation==="horizontal"?{[`& .${a.firstButton},& .${a.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${a.lastButton},& .${a.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${a.firstButton},& .${a.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${a.lastButton},& .${a.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},t.orientation==="horizontal"?{[`& .${a.lastButton}.${A.disabled},& .${a.middleButton}.${A.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${a.lastButton}.${A.disabled},& .${a.middleButton}.${A.disabled}`]:{borderTop:"1px solid transparent"}})),ut=r.forwardRef(function(e,o){const s=M({props:e,name:"MuiToggleButtonGroup"}),{children:p,className:b,color:m="standard",disabled:C=!1,exclusive:$=!1,fullWidth:R=!1,onChange:g,orientation:T="horizontal",size:h="medium",value:c}=s,z=D(s,Z),y=x({},s,{disabled:C,fullWidth:R,orientation:T,size:h}),u=tt(y),w=r.useCallback((i,d)=>{if(!g)return;const f=c&&c.indexOf(d);let j;c&&f>=0?(j=c.slice(),j.splice(f,1)):j=c?c.concat(d):[d],g(i,j)},[g,c]),l=r.useCallback((i,d)=>{g&&g(i,c===d?null:d)},[g,c]),n=r.useMemo(()=>({className:u.grouped,onChange:$?l:w,value:c,size:h,fullWidth:R,color:m,disabled:C}),[u.grouped,$,l,w,c,h,R,m,C]),B=V(p),v=B.length,k=i=>{const d=i===0,f=i===v-1;return d&&f?"":d?u.firstButton:f?u.lastButton:u.middleButton};return W.jsx(et,x({role:"group",className:G(u.root,b),ref:o,ownerState:y},z,{children:W.jsx(U.Provider,{value:n,children:B.map((i,d)=>W.jsx(F.Provider,{value:k(d),children:i},d))})}))}),ot="npm_packages_vaporjawn_v1",at=1e3*60*60*12;async function st(t){try{const e=await fetch(`https://api.npmjs.org/downloads/point/last-week/${encodeURIComponent(t)}`);if(!e.ok)return;const o=await e.json();if(typeof o.downloads=="number")return o.downloads}catch{}}function rt(t){var o,s,p;const e=t.package;return{name:e.name,version:e.version,description:e.description||"",publishedAt:e.date,homepage:(o=e.links)==null?void 0:o.homepage,repository:(s=e.links)==null?void 0:s.repository,npmUrl:(p=e.links)==null?void 0:p.npm,keywords:e.keywords||[]}}function pt(t={}){const{maintainer:e="vaporjawn",size:o=20,cacheTtlMs:s=at,fetchDownloads:p=!0}=t,[b,m]=r.useState([]),[C,$]=r.useState(!1),[R,g]=r.useState(null),T=r.useRef(!1),h=`${ot}_${e}_${o}`,c=r.useCallback(()=>{try{const l=localStorage.getItem(h);if(!l)return null;const n=JSON.parse(l);return!n.fetchedAt||!Array.isArray(n.data)?null:n}catch{return null}},[h]),z=r.useCallback(l=>{try{const n={fetchedAt:Date.now(),data:l};localStorage.setItem(h,JSON.stringify(n))}catch{}},[h]),y=r.useCallback(async l=>{if(!p)return l;const n=l.slice(0,10),B=await Promise.all(n.map(async v=>{const k=await st(v.name);return{...v,weeklyDownloads:k}}));return l.map(v=>B.find(i=>i.name===v.name)||v)},[p]),u=r.useCallback(async(l=!1)=>{if(!T.current){T.current=!0,$(!0),g(null);try{const n=`https://registry.npmjs.org/-/v1/search?text=maintainer:${encodeURIComponent(e)}&size=${o}`,B=await fetch(n);if(!B.ok)throw new Error(`npm search failed (${B.status})`);let i=((await B.json()).objects||[]).map(rt);i.sort((d,f)=>{const j=d.publishedAt?new Date(d.publishedAt).getTime():0;return(f.publishedAt?new Date(f.publishedAt).getTime():0)-j}),i=await y(i),m(i),z(i)}catch(n){l||(n instanceof Error?g(n.message):g("Failed to load npm packages"))}finally{$(!1),T.current=!1}}},[e,o,y,z]);r.useEffect(()=>{const l=c();if(l){const n=Date.now()-l.fetchedAt<s;m(l.data),n||u()}else u()},[s,c,u]);const w=r.useCallback(()=>{u(!0)},[u]);return{packages:b,loading:C,error:R,refresh:w}}export{ut as T,dt as a,pt as u};
//# sourceMappingURL=useNpmPackages-DfvBJCiq.js.map
