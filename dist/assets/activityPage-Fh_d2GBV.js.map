{"version":3,"file":"activityPage-Fh_d2GBV.js","sources":["../../src/hooks/useGithubActivity.ts","../../src/components/activity/CommitGraph.tsx","../../src/components/activity/ActivityLegend.tsx","../../src/components/PullToRefresh/PullToRefresh.tsx","../../src/pages/activity/activityPage.tsx"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from \"react\";\n\n// ---------------- Types ----------------\nexport interface GithubEventRaw {\n  id: string;\n  type: string;\n  created_at: string;\n  repo?: { name: string; url: string };\n  actor?: { login: string; avatar_url?: string; url?: string };\n  // Partial payload shape for event types we normalize; unknown fields ignored.\n  payload?: {\n    // PushEvent\n    commits?: { message?: string }[];\n    ref?: string;\n    // PR\n    action?: string;\n    number?: number;\n    pull_request?: {\n      number?: number;\n      merged?: boolean;\n      html_url?: string;\n    };\n    // Release\n    release?: { tag_name?: string; html_url?: string };\n    // Fork\n    forkee?: { html_url?: string };\n    // Issues / Comments\n    issue?: { number?: number; html_url?: string };\n    comment?: { html_url?: string };\n  };\n}\n\nexport type GithubActivityKind =\n  | \"push\"\n  | \"pr-open\"\n  | \"pr-merge\"\n  | \"release\"\n  | \"fork\"\n  | \"star\"\n  | \"issue-open\"\n  | \"issue-comment\"\n  | \"other\";\n\nexport interface GithubActivityItem {\n  id: string;\n  kind: GithubActivityKind;\n  repo: string;\n  message: string;\n  createdAt: string; // ISO\n  url?: string; // target URL (repo, PR, issue, release)\n}\n\ninterface UseGithubActivityOptions {\n  username?: string; // default vaporjawn\n  perPage?: number; // default 30 (GitHub API default)\n  cacheTtlMs?: number; // default 10m (events change more frequently than npm packages)\n  includeTypes?: GithubActivityKind[]; // optional filter after normalization\n}\n\ninterface UseGithubActivityState {\n  events: GithubActivityItem[];\n  loading: boolean;\n  error: string | null;\n  refresh: () => void;\n}\n\nconst DEFAULT_USER = \"vaporjawn\";\nconst DEFAULT_TTL = 1000 * 60 * 10; // 10 minutes\nconst DEFAULT_CACHE_KEY = \"gh_activity_v1\";\n\ninterface CachedData {\n  fetchedAt: number;\n  data: GithubActivityItem[];\n}\n\nfunction classify(e: GithubEventRaw): GithubActivityItem {\n  const { type, created_at, repo: repoObj } = e;\n  const repo = repoObj?.name || \"unknown\";\n  const createdAt = created_at;\n  const base: Omit<GithubActivityItem, \"message\" | \"kind\"> = {\n    id: e.id,\n    repo,\n    createdAt,\n    url: undefined,\n  };\n\n  // Default fallbacks\n  let kind: GithubActivityKind = \"other\";\n  let message = type;\n  let url: string | undefined = undefined;\n\n  switch (type) {\n    case \"PushEvent\": {\n      kind = \"push\";\n      const commits = Array.isArray(e.payload?.commits) ? e.payload!.commits.length : 0;\n      const ref = e.payload?.ref?.split(\"/\").pop();\n      message = `Pushed ${commits} commit${commits === 1 ? \"\" : \"s\"} to ${ref || \"main\"}`;\n      url = `https://github.com/${repo}/commits/${ref || \"main\"}`;\n      break;\n    }\n    case \"PullRequestEvent\": {\n      const action = e.payload?.action;\n      const prNumber = e.payload?.number || e.payload?.pull_request?.number;\n      url = e.payload?.pull_request?.html_url;\n      if (action === \"opened\") {\n        kind = \"pr-open\";\n        message = `Opened PR #${prNumber} in ${repo}`;\n      } else if (action === \"closed\" && e.payload?.pull_request?.merged) {\n        kind = \"pr-merge\";\n        message = `Merged PR #${prNumber} in ${repo}`;\n      } else {\n        kind = \"other\";\n        message = `PR ${action} #${prNumber} in ${repo}`;\n      }\n      break;\n    }\n    case \"ReleaseEvent\": {\n      kind = \"release\";\n      const tag = e.payload?.release?.tag_name;\n      url = e.payload?.release?.html_url;\n      message = `Published release ${tag || \"(untagged)\"} in ${repo}`;\n      break;\n    }\n    case \"ForkEvent\": {\n      kind = \"fork\";\n      url = e.payload?.forkee?.html_url;\n      message = `Forked ${repo}`;\n      break;\n    }\n    case \"WatchEvent\": {\n      kind = \"star\";\n      message = `Starred ${repo}`;\n      url = `https://github.com/${repo}`;\n      break;\n    }\n    case \"IssuesEvent\": {\n      const action = e.payload?.action;\n      const issueNumber = e.payload?.issue?.number;\n      url = e.payload?.issue?.html_url;\n      if (action === \"opened\") {\n        kind = \"issue-open\";\n        message = `Opened issue #${issueNumber} in ${repo}`;\n      } else {\n        kind = \"other\";\n        message = `Issue ${action} #${issueNumber} in ${repo}`;\n      }\n      break;\n    }\n    case \"IssueCommentEvent\": {\n      kind = \"issue-comment\";\n      const issueNumber = e.payload?.issue?.number;\n      url = e.payload?.comment?.html_url || e.payload?.issue?.html_url;\n      message = `Commented on issue #${issueNumber} in ${repo}`;\n      break;\n    }\n    default: {\n      kind = \"other\";\n      message = type.replace(/Event$/, \"\") + ` in ${repo}`;\n      url = `https://github.com/${repo}`;\n    }\n  }\n\n  return { ...base, kind, message, url };\n}\n\nexport function useGithubActivity(options: UseGithubActivityOptions = {}): UseGithubActivityState {\n  const {\n    username = DEFAULT_USER,\n    perPage = 30,\n    cacheTtlMs = DEFAULT_TTL,\n    includeTypes,\n  } = options;\n\n  const [events, setEvents] = useState<GithubActivityItem[]>([]);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const inFlightRef = useRef<boolean>(false);\n\n  const cacheKey = `${DEFAULT_CACHE_KEY}_${username}_${perPage}`;\n\n  const readCache = useCallback((): CachedData | null => {\n    try {\n      const raw = localStorage.getItem(cacheKey);\n      if (!raw) return null;\n      const parsed = JSON.parse(raw) as CachedData;\n      if (!parsed.fetchedAt || !Array.isArray(parsed.data)) return null;\n      return parsed;\n    } catch {\n      return null;\n    }\n  }, [cacheKey]);\n\n  const writeCache = useCallback(\n    (data: GithubActivityItem[]) => {\n      try {\n        const payload: CachedData = { fetchedAt: Date.now(), data };\n        localStorage.setItem(cacheKey, JSON.stringify(payload));\n      } catch {\n        // ignore\n      }\n    },\n    [cacheKey]\n  );\n\n  const fetchData = useCallback(async (force = false) => {\n    if (inFlightRef.current) return;\n    inFlightRef.current = true;\n    setLoading(true);\n    setError(null);\n    try {\n      const url = `https://api.github.com/users/${encodeURIComponent(username)}/events/public?per_page=${perPage}`;\n      const resp = await fetch(url, {\n        headers: {\n          // Accept header for potential future compatibility\n          Accept: \"application/vnd.github+json\",\n        },\n      });\n      if (!resp.ok) throw new Error(`GitHub activity failed (${resp.status})`);\n      const json: GithubEventRaw[] = await resp.json();\n      let normalized = json.map(classify);\n      if (includeTypes && includeTypes.length) {\n        normalized = normalized.filter((e) => includeTypes.includes(e.kind));\n      }\n      // Sort newest first (API returns newest first already, but ensure)\n      normalized.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n      setEvents(normalized);\n      writeCache(normalized);\n    } catch (e: unknown) {\n      if (!force) {\n        if (e instanceof Error) setError(e.message); else setError(\"Failed to load GitHub activity\");\n      }\n    } finally {\n      setLoading(false);\n      inFlightRef.current = false;\n    }\n  }, [username, perPage, includeTypes, writeCache]);\n\n  useEffect(() => {\n    const cached = readCache();\n    if (cached) {\n      const isFresh = Date.now() - cached.fetchedAt < cacheTtlMs;\n      setEvents(cached.data);\n      if (!isFresh) fetchData();\n    } else {\n      fetchData();\n    }\n  }, [cacheTtlMs, readCache, fetchData]);\n\n  const refresh = useCallback(() => {\n    fetchData(true);\n  }, [fetchData]);\n\n  return { events, loading, error, refresh };\n}\n\nexport default useGithubActivity;\n","import React, { useMemo } from \"react\";\nimport { Box, Tooltip, useTheme } from \"@mui/material\";\n\n// Generic activity event for the CommitGraph. We intentionally keep this lightweight so\n// both GitHub events and synthetic npm publish events can be rendered together.\nexport interface CommitGraphEvent {\n  id: string;\n  createdAt: string; // ISO timestamp\n  message: string;\n  url?: string;\n  kind: string; // e.g. push, pr-open, npm-publish, etc.\n  // Optional repo (legacy GitHub specific) ‚Äì retained for backward compatibility.\n  repo?: string;\n  // Lane label ‚Äì when provided it overrides repo grouping (e.g. \"GitHub\" or \"npm\").\n  lane?: string;\n}\n\n/**\n * Minimal GitKraken-inspired commit graph.\n * We group events by repo (branch lane) and order chronologically (newest first input assumed).\n */\nexport interface CommitGraphProps {\n  events: CommitGraphEvent[];\n  /** Maximum distinct lanes (ignored if only two like GitHub + npm). */\n  maxRepos?: number;\n  /** Vertical space per row (px). */\n  heightPerNode?: number;\n  /** Optional legend element id to reference for accessibility (aria-describedby). Defaults to 'activity-legend'. */\n  legendId?: string;\n  /** Orientation: 'desc' newest at top (default) or 'asc' oldest at top. */\n  orientation?: \"asc\" | \"desc\";\n  /** Show date grouping header rows. */\n  showDates?: boolean;\n}\n\ninterface LaneInfo {\n  label: string; // lane label (repo name, or explicit lane override)\n  color: string;\n  index: number;\n}\n\nconst PALETTE = [\n  \"#14b8a6\", // teal\n  \"#6366f1\", // indigo\n  \"#f59e0b\", // amber\n  \"#ec4899\", // pink\n  \"#0ea5e9\", // sky\n  \"#84cc16\", // lime\n  \"#f43f5e\", // rose\n  \"#8b5cf6\", // violet\n];\n\nfunction colorForLane(i: number) { return PALETTE[i % PALETTE.length]; }\n\ntype Row =\n  | { type: \"date\"; date: string }\n  | { type: \"event\"; evt: CommitGraphEvent; laneKey: string; lane?: LaneInfo };\n\nexport const CommitGraph: React.FC<CommitGraphProps> = ({\n  events,\n  maxRepos = 12,\n  heightPerNode = 46,\n  legendId = \"activity-legend\",\n  orientation = \"desc\",\n  showDates = true\n}) => {\n  const theme = useTheme();\n\n  // Enhanced lane & row construction with optional date grouping & orientation.\n  const { lanes, rows, trunkLane, accessibleList } = useMemo(() => {\n    if (!events.length) {\n      return { lanes: [] as LaneInfo[], rows: [] as Row[], trunkLane: undefined as LaneInfo | undefined, accessibleList: [] as string[] };\n    }\n\n    const sorted = [...events].sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()); // oldest->newest\n    if (orientation === \"desc\") sorted.reverse(); // newest->oldest if desc (top to bottom)\n\n    // Distinct GitHub repos (first appearance order in the chosen orientation list).\n    const githubRepoOrder: string[] = [];\n    const otherLaneOrder: string[] = [];\n    const otherLaneSet = new Set<string>();\n\n    sorted.forEach(evt => {\n      if (evt.lane === \"GitHub\" && evt.repo) {\n        if (!githubRepoOrder.includes(evt.repo)) githubRepoOrder.push(evt.repo);\n      } else if (evt.lane && evt.lane !== \"GitHub\") {\n        if (!otherLaneSet.has(evt.lane)) { otherLaneSet.add(evt.lane); otherLaneOrder.push(evt.lane); }\n      }\n    });\n\n    const laneOrder: string[] = [\"GitHub\", ...githubRepoOrder, ...otherLaneOrder];\n    const laneMap = new Map<string, LaneInfo>();\n    laneOrder.slice(0, maxRepos).forEach((label, idx) => laneMap.set(label, { label, color: colorForLane(idx), index: idx }));\n    const trunk = laneMap.get(\"GitHub\")!;\n\n    // Build rows: optionally insert date header rows before first event of each day (based on orientation order).\n    const rows: Row[] = [];\n    let lastDate: string | undefined;\n    sorted.forEach((evt) => {\n      const date = evt.createdAt.slice(0, 10); // YYYY-MM-DD\n      if (showDates && date !== lastDate) {\n        rows.push({ type: \"date\", date });\n        lastDate = date;\n      }\n      let laneKey: string;\n      if (evt.lane === \"GitHub\" && evt.repo) laneKey = evt.repo;\n      else if (evt.lane === \"GitHub\") laneKey = \"GitHub\";\n      else laneKey = evt.lane || evt.repo || \"Misc\";\n      rows.push({ type: \"event\", evt, laneKey, lane: laneMap.get(laneKey) });\n    });\n\n    const accessibleList = rows.filter(r => r.type === \"event\").map(r => {\n      const e = (r as Extract<Row, { type: \"event\" }>).evt; const lane = (r as Extract<Row, { type: \"event\" }>).laneKey;\n      return `${e.createdAt} ‚Äì ${lane}: ${e.message}`;\n    });\n\n    return { lanes: laneOrder.slice(0, maxRepos).map(l => laneMap.get(l)!), rows, trunkLane: trunk, accessibleList };\n  }, [events, maxRepos, orientation, showDates]);\n\n  const laneWidth = 36; // horizontal allocation per lane\n  const leftPad = 52;   // more space for date labels + axis\n  const NODE_SIZE_BRANCH = 30;\n  const NODE_SIZE_TRUNK = 16;\n  const RADIUS_BRANCH = NODE_SIZE_BRANCH / 2;\n  const RADIUS_TRUNK = NODE_SIZE_TRUNK / 2;\n  const totalHeight = rows.length * heightPerNode + 16;\n\n  const KIND_LABELS: Record<string, string> = {\n    push: \"Push\",\n    \"pr-open\": \"PR Opened\",\n    \"pr-merge\": \"PR Merged\",\n    release: \"Release\",\n    fork: \"Fork\",\n    star: \"Star\",\n    \"issue-open\": \"Issue Opened\",\n    \"issue-comment\": \"Issue Comment\",\n    \"npm-publish\": \"npm Publish\",\n  };\n\n  return (\n    <Box sx={{ position: \"relative\", width: \"100%\", overflowX: \"auto\", py: 2 }}>\n      {/* Lanes header */}\n      <Box sx={{ display: \"flex\", flexDirection: \"row\", pl: leftPad, mb: 1 }}>\n        {lanes.map(l => {\n          const isTrunk = l.label === \"GitHub\";\n          return (\n            <Box key={l.label} sx={{ width: laneWidth, mr: 3, textAlign: \"center\", fontSize: 10, color: l.color, whiteSpace: \"nowrap\", overflow: \"hidden\", textOverflow: \"ellipsis\", fontWeight: isTrunk ? 700 : 500, position: \"relative\", \"&:after\": isTrunk ? { content: \"\\\"trunk\\\"\", position: \"absolute\", left: 0, right: 0, top: \"100%\", fontSize: 8, letterSpacing: 0.5, opacity: 0.55 } : undefined }} title={l.label.split(\"/\").pop()}>\n              {l.label === \"GitHub\" ? \"GitHub\" : l.label.split(\"/\").pop()}\n            </Box>\n          );\n        })}\n      </Box>\n      <Box sx={{ position: \"relative\", height: totalHeight, pl: leftPad }}>\n        {/* Vertical trunk line */}\n        {trunkLane && (\n          <Box sx={{ position: \"absolute\", left: trunkLane.index * (laneWidth + 12) + laneWidth / 2, top: 0, bottom: 0, width: 2, bgcolor: theme.palette.mode === \"dark\" ? \"rgba(255,255,255,0.18)\" : \"rgba(0,0,0,0.18)\" }} />\n        )}\n        {/* Rows (date headers + events) */}\n        {rows.map((r, rowIndex) => {\n          const yCenter = rowIndex * heightPerNode + 8;\n          if (r.type === \"date\") {\n            return (\n              <Box key={`date-${r.date}-${rowIndex}`} sx={{ position: \"absolute\", left: 0, top: yCenter - 10, height: heightPerNode, display: \"flex\", alignItems: \"center\", fontSize: 11, fontWeight: 600, color: \"text.secondary\" }}>\n                {r.date}\n              </Box>\n            );\n          }\n          if (!r.evt) return null;\n          const { lane } = r;\n          const trunkX = trunkLane ? trunkLane.index * (laneWidth + 12) + laneWidth / 2 : 0;\n          const laneX = lane ? lane.index * (laneWidth + 12) + laneWidth / 2 : trunkX;\n          // Determine icon glyph based on kind\n          const kindGlyph = (() => {\n            switch (r.evt!.kind) {\n              case \"push\": return \"‚¨Ü\";\n              case \"pr-open\": return \"PR\";\n              case \"pr-merge\": return \"M\";\n              case \"release\": return \"‚õì\";\n              case \"fork\": return \"‚ëÇ\";\n              case \"star\": return \"‚òÖ\";\n              case \"issue-open\": return \"‚óª\";\n              case \"issue-comment\": return \"üí¨\";\n              case \"npm-publish\": return \"üì¶\";\n              default: return \"‚óè\";\n            }\n          })();\n          const humanKind = KIND_LABELS[r.evt.kind] || (r.evt.kind.charAt(0).toUpperCase() + r.evt.kind.slice(1));\n          const isTrunkEvent = lane?.label === \"GitHub\";\n          return (\n            <React.Fragment key={r.evt.id}>\n              {/* Horizontal connector for branch events */}\n              {!isTrunkEvent && (\n                <Box sx={{ position: \"absolute\", left: Math.min(trunkX, laneX), top: yCenter, width: Math.abs(laneX - trunkX), height: 2, bgcolor: lane?.color || \"divider\", opacity: 0.55, pointerEvents: \"none\" }} />\n              )}\n              {/* Trunk node */}\n              {trunkLane && (\n                <Box sx={{ position: \"absolute\", left: trunkX - RADIUS_TRUNK, top: yCenter - RADIUS_TRUNK, width: NODE_SIZE_TRUNK, height: NODE_SIZE_TRUNK, borderRadius: \"50%\", backgroundColor: theme.palette.background.paper, border: `2px solid ${theme.palette.divider}`, boxSizing: \"border-box\", pointerEvents: \"none\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", fontSize: 9, fontWeight: 600, color: \"text.secondary\" }} aria-hidden=\"true\">\n                  {/* tiny bullet could show order index if desired */}\n                </Box>\n              )}\n              {/* Branch or trunk event node */}\n              <Tooltip title={`${r.evt.message}\\n${humanKind} ‚Ä¢ ${(r.evt.repo || r.evt.lane || \"GitHub\")}`}>\n                <Box component={r.evt.url ? \"a\" : \"div\"} href={r.evt.url} target={r.evt.url ? \"_blank\" : undefined} rel={r.evt.url ? \"noopener noreferrer\" : undefined} aria-label={`${humanKind} event in ${(r.evt.repo || r.evt.lane || \"GitHub\")} : ${r.evt.message}`} aria-describedby={legendId} tabIndex={0} sx={{ position: \"absolute\", left: laneX - (isTrunkEvent ? RADIUS_TRUNK : RADIUS_BRANCH), top: yCenter - (isTrunkEvent ? RADIUS_TRUNK : RADIUS_BRANCH), width: isTrunkEvent ? NODE_SIZE_TRUNK : NODE_SIZE_BRANCH, height: isTrunkEvent ? NODE_SIZE_TRUNK : NODE_SIZE_BRANCH, borderRadius: \"50%\", backgroundColor: isTrunkEvent ? theme.palette.primary.main : (lane?.color || theme.palette.secondary.main), color: theme.palette.getContrastText(isTrunkEvent ? theme.palette.primary.main : (lane?.color || theme.palette.secondary.main)), fontSize: isTrunkEvent ? 9 : 12, fontWeight: 700, display: \"flex\", alignItems: \"center\", justifyContent: \"center\", textDecoration: \"none\", boxShadow: (t) => `0 0 0 2px ${t.palette.background.default}, 0 3px 6px rgba(0,0,0,0.45)`, transition: \"transform .15s, box-shadow .15s\", \"&:hover\": { transform: \"scale(1.15)\" }, \"&:focus-visible\": { outline: \"2px solid #fff\", outlineOffset: 3, transform: \"scale(1.15)\" } }}>\n                  {kindGlyph}\n                </Box>\n              </Tooltip>\n              {/* Label to right of farthest node */}\n              <Box sx={{ position: \"absolute\", left: Math.max(laneX, trunkX) + (isTrunkEvent ? RADIUS_TRUNK : RADIUS_BRANCH) + 10, top: yCenter - (isTrunkEvent ? RADIUS_TRUNK : RADIUS_BRANCH) + 2, minHeight: (isTrunkEvent ? NODE_SIZE_TRUNK : NODE_SIZE_BRANCH) - 4, display: \"flex\", alignItems: \"center\", fontSize: 12, pr: 2, maxWidth: `calc(100% - ${Math.max(laneX, trunkX) + (isTrunkEvent ? RADIUS_TRUNK : RADIUS_BRANCH) + 32}px)`, color: \"text.secondary\", lineHeight: 1.2, whiteSpace: \"nowrap\", overflow: \"hidden\", textOverflow: \"ellipsis\", pointerEvents: \"none\" }} aria-hidden=\"true\">\n                {r.evt.message}\n                <Box component=\"span\" sx={{ ml: 0.75, opacity: 0.55, fontSize: 11 }}>({humanKind})</Box>\n              </Box>\n            </React.Fragment>\n          );\n        })}\n        {/* Accessible offscreen list of events for screen readers */}\n        <Box component=\"ol\" aria-label=\"Activity chronological list\" sx={{ position: \"absolute\", left: -9999, width: 1, height: 1, overflow: \"hidden\", p: 0, m: 0 }}>\n          {accessibleList.map((line, i) => (\n            <li key={i}>{line}</li>\n          ))}\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nexport default CommitGraph;\n","import React from \"react\";\nimport { Box, Typography, Stack } from \"@mui/material\";\n\ninterface LegendItem {\n  label: string;\n  glyph: string;\n  description: string;\n}\n\n// Static legend definitions ‚Äì keep in sync with CommitGraph KIND_LABELS and glyph switch.\nconst KIND_ITEMS: LegendItem[] = [\n  { label: \"Push\", glyph: \"‚¨Ü\", description: \"Code pushed to a repository\" },\n  { label: \"PR Opened\", glyph: \"PR\", description: \"Pull request opened\" },\n  { label: \"PR Merged\", glyph: \"M\", description: \"Pull request merged\" },\n  { label: \"Release\", glyph: \"‚õì\", description: \"Release / tag published\" },\n  { label: \"Fork\", glyph: \"‚ëÇ\", description: \"Repository forked\" },\n  { label: \"Star\", glyph: \"‚òÖ\", description: \"Repository starred\" },\n  { label: \"Issue Opened\", glyph: \"‚óª\", description: \"Issue created\" },\n  { label: \"Issue Comment\", glyph: \"üí¨\", description: \"Issue or PR comment\" },\n  { label: \"npm Publish\", glyph: \"üì¶\", description: \"Package version published to npm\" },\n];\n\nexport const ActivityLegend: React.FC = () => {\n  return (\n    <Box\n      component=\"section\"\n      aria-labelledby=\"activity-legend-heading\"\n      id=\"activity-legend\"\n      sx={{\n        mt: 3,\n        p: 2,\n        borderRadius: 2,\n        border: theme => `1px solid ${theme.palette.divider}`,\n  background: theme => theme.palette.mode === \"dark\" ? \"rgba(255,255,255,0.03)\" : \"rgba(0,0,0,0.02)\",\n      }}\n    >\n      <Typography id=\"activity-legend-heading\" variant=\"subtitle2\" fontWeight={600} gutterBottom>\n        Activity Graph Legend\n      </Typography>\n      <Typography variant=\"caption\" component=\"p\" sx={{ mb: 2, lineHeight: 1.4 }}>\n        The first lane is the GitHub trunk. Each GitHub repository branches horizontally from the trunk on the row of its first visible event; connectors show the relationship. The separate <strong>npm</strong> lane lists package publish events. Hover or focus bubbles for details.\n      </Typography>\n      <Stack direction=\"row\" flexWrap=\"wrap\" spacing={1.5} useFlexGap>\n        {KIND_ITEMS.map(item => (\n          <Stack\n            key={item.label}\n            direction=\"row\"\n            spacing={0.75}\n            alignItems=\"center\"\n            sx={{ minWidth: 140 }}\n          >\n            <Box\n              aria-hidden\n              sx={{\n                width: 22,\n                height: 22,\n                borderRadius: \"50%\",\n                bgcolor: \"action.hover\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                fontSize: 11,\n                fontWeight: 700,\n              }}\n            >\n              {item.glyph}\n            </Box>\n            <Box sx={{ fontSize: 11, lineHeight: 1.2 }}>\n              <strong>{item.label}</strong>\n              <Box component=\"span\" sx={{ ml: 0.5, opacity: 0.65 }}>\n                {item.description}\n              </Box>\n            </Box>\n          </Stack>\n        ))}\n      </Stack>\n    </Box>\n  );\n};\n\nexport default ActivityLegend;\n","import { useState, useEffect, useRef, ReactNode, useCallback } from \"react\";\nimport { Box, CircularProgress } from \"@mui/material\";\n\ninterface PullToRefreshProps {\n  onRefresh: () => Promise<void>;\n  children: ReactNode;\n  threshold?: number;\n}\n\nconst PullToRefresh: React.FC<PullToRefreshProps> = ({\n  onRefresh,\n  children,\n  threshold = 80,\n}) => {\n  const [pullDistance, setPullDistance] = useState(0);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [startY, setStartY] = useState(0);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const handleTouchStart = useCallback((e: TouchEvent) => {\n    if (window.scrollY === 0) {\n      setStartY(e.touches[0].clientY);\n    }\n  }, []);\n\n  const handleTouchMove = useCallback((e: TouchEvent) => {\n    if (startY === 0 || window.scrollY > 0 || isRefreshing) return;\n\n    const currentY = e.touches[0].clientY;\n    const distance = currentY - startY;\n\n    if (distance > 0) {\n      setPullDistance(Math.min(distance, threshold * 1.5));\n    }\n  }, [startY, isRefreshing, threshold]);\n\n  const handleTouchEnd = useCallback(async () => {\n    if (pullDistance >= threshold && !isRefreshing) {\n      setIsRefreshing(true);\n      try {\n        await onRefresh();\n      } catch (error) {\n        console.error(\"Refresh failed:\", error);\n      } finally {\n        setIsRefreshing(false);\n      }\n    }\n    setPullDistance(0);\n    setStartY(0);\n  }, [pullDistance, threshold, isRefreshing, onRefresh]);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    container.addEventListener(\"touchstart\", handleTouchStart, {\n      passive: true,\n    });\n    container.addEventListener(\"touchmove\", handleTouchMove, { passive: true });\n    container.addEventListener(\"touchend\", handleTouchEnd);\n\n    return () => {\n      container.removeEventListener(\"touchstart\", handleTouchStart);\n      container.removeEventListener(\"touchmove\", handleTouchMove);\n      container.removeEventListener(\"touchend\", handleTouchEnd);\n    };\n  }, [startY, pullDistance, isRefreshing, handleTouchStart, handleTouchMove, handleTouchEnd]);\n\n  const pullProgress = Math.min((pullDistance / threshold) * 100, 100);\n\n  return (\n    <Box ref={containerRef} sx={{ position: \"relative\", overflow: \"hidden\" }}>\n      {/* Pull indicator */}\n      <Box\n        sx={{\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          right: 0,\n          height: pullDistance,\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          transition: isRefreshing\n            ? \"height 0.3s ease-out\"\n            : \"none\",\n          zIndex: 1000,\n          bgcolor: \"background.paper\",\n        }}\n      >\n        {(pullDistance > 0 || isRefreshing) && (\n          <CircularProgress\n            variant={isRefreshing ? \"indeterminate\" : \"determinate\"}\n            value={pullProgress}\n            size={30}\n          />\n        )}\n      </Box>\n\n      {/* Content */}\n      <Box\n        sx={{\n          transform: `translateY(${pullDistance}px)`,\n          transition: pullDistance === 0 ? \"transform 0.3s ease-out\" : \"none\",\n        }}\n      >\n        {children}\n      </Box>\n    </Box>\n  );\n};\n\nexport default PullToRefresh;\n","import React, { useCallback, useMemo, useState } from \"react\";\nimport {\n  Box,\n  Typography,\n  CircularProgress,\n  Alert,\n  useTheme,\n  Paper,\n  Stack,\n  Tooltip,\n  IconButton,\n  List,\n  ListItem,\n  ListItemText,\n  Divider,\n  Button,\n  ToggleButtonGroup,\n  ToggleButton,\n} from \"@mui/material\";\nimport RefreshIcon from \"@mui/icons-material/Refresh\";\nimport OpenInNewIcon from \"@mui/icons-material/OpenInNew\";\nimport TimelineIcon from \"@mui/icons-material/Timeline\";\nimport ListIcon from \"@mui/icons-material/FormatListBulleted\";\n\nimport { useGithubActivity } from \"../../hooks/useGithubActivity\";\nimport { useNpmPackages } from \"../../hooks/useNpmPackages\";\nimport { CommitGraph, CommitGraphEvent } from \"../../components/activity/CommitGraph\";\nimport { ActivityLegend } from \"../../components/activity/ActivityLegend\";\nimport PullToRefresh from \"../../components/PullToRefresh\";\nimport toast from \"react-hot-toast\";\n\n// --- relative time utility -------------------------------------------------\n// Lightweight relative time helper (minutes / hours / days / weeks; >30d => locale date)\nfunction relativeTime(input: string | number | Date): string {\n  try {\n    const date = new Date(input);\n    const now = Date.now();\n    let diffMs = now - date.getTime();\n    const future = diffMs < 0;\n    diffMs = Math.abs(diffMs);\n\n    const sec = Math.floor(diffMs / 1000);\n    if (sec < 45) return future ? \"in a few sec\" : \"just now\";\n    const min = Math.floor(sec / 60);\n    if (min < 60) return future ? `in ${min}m` : `${min}m ago`;\n    const hr = Math.floor(min / 60);\n    if (hr < 24) return future ? `in ${hr}h` : `${hr}h ago`;\n    const day = Math.floor(hr / 24);\n    if (day < 7) return future ? `in ${day}d` : `${day}d ago`;\n    const week = Math.floor(day / 7);\n    if (week < 5) return future ? `in ${week}w` : `${week}w ago`;\n\n    // Fallback to short date for older items\n    return date.toLocaleDateString(undefined, {\n      month: \"short\",\n      day: \"numeric\",\n      year: new Date().getFullYear() === date.getFullYear() ? undefined : \"numeric\",\n    });\n  } catch {\n    return \"\";\n  }\n}\n\n// --- Component -------------------------------------------------------------\nconst ActivityPage: React.FC = () => {\n  const theme = useTheme();\n\n  // Data hooks\n  const {\n    events: githubEvents,\n    loading: githubLoading,\n    error: githubError,\n    refresh: refreshGithub,\n  } = useGithubActivity();\n  const {\n    packages: npmPackages,\n    loading: npmLoading,\n    error: npmError,\n    refresh: refreshNpm,\n  } = useNpmPackages();\n  // npm maintainer profile URL (hook does not return profile meta object currently)\n  const npmProfileUrl = \"https://www.npmjs.com/~vaporjawn\"; // keep in sync with maintainer option if changed\n\n  // View toggle for GitHub activity section\n  const [ghView, setGhView] = useState<\"graph\" | \"list\">(\"graph\");\n  const handleGhView = useCallback(\n    (_: unknown, val: \"graph\" | \"list\" | null) => {\n      if (val) setGhView(val);\n    },\n    []\n  );\n\n  // Unified events: GitHub events already normalized; map npm packages to events.\n  const unifiedEvents: CommitGraphEvent[] = useMemo(() => {\n    const nowIso = new Date().toISOString();\n    const npmEvents: CommitGraphEvent[] = npmPackages.map((p) => ({\n      id: `npm:${p.name}@${p.version}:${p.publishedAt || \"no-date\"}`,\n      createdAt: p.publishedAt || nowIso, // guarantee string for graph; fallback to now if missing\n      message: `${p.name} v${p.version} published`,\n      kind: \"npm-publish\",\n      lane: \"npm\",\n      url: p.npmUrl,\n    }));\n    // GitHub events form the trunk; assign lane explicitly.\n    const ghEvents: CommitGraphEvent[] = githubEvents.map((e) => ({\n      ...e,\n      lane: \"GitHub\",\n    }));\n    return [...ghEvents, ...npmEvents].sort(\n      (a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n    );\n  }, [githubEvents, npmPackages]);\n\n  // Pull-to-refresh handler\n  const handleRefresh = useCallback(async () => {\n    try {\n      await Promise.all([refreshGithub(), refreshNpm()]);\n      toast.success(\"Activity refreshed successfully!\");\n    } catch (_error) {\n      toast.error(\"Failed to refresh activity\");\n    }\n  }, [refreshGithub, refreshNpm]);\n\n  return (\n    <PullToRefresh onRefresh={handleRefresh}>\n      <Box sx={{ maxWidth: 1200, mx: \"auto\", px: { xs: 2, md: 3 }, py: { xs: 4, md: 6 } }}>\n      <Typography variant=\"h3\" fontWeight={700} gutterBottom>\n        Activity\n      </Typography>\n      <Typography variant=\"body1\" sx={{ opacity: 0.75, mb: 4 }}>\n        A unified timeline of my open-source work. npm publishes appear first, with a\n        commit‚Äëstyle graph of GitHub repository activity.\n      </Typography>\n\n      {/* npm Packages Section (FIRST) */}\n      {(\n        <Paper\n          elevation={3}\n          sx={{\n            p: { xs: 2, md: 4 },\n            borderRadius: 4,\n            background:\n              theme.palette.mode === \"dark\"\n                ? \"linear-gradient(135deg, rgba(255,255,255,0.035), rgba(255,255,255,0.018))\"\n                : \"linear-gradient(135deg, rgba(0,0,0,0.012), rgba(0,0,0,0.03))\",\n            backdropFilter: \"blur(10px)\",\n          }}\n        >\n          <Stack spacing={2}>\n            <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\">\n              <Typography variant=\"h5\" fontWeight={600} component=\"h2\">\n                npm Packages\n              </Typography>\n              <Stack direction=\"row\" spacing={1} alignItems=\"center\">\n                <Tooltip title=\"Refresh\">\n                  <span>\n                    <IconButton\n                      aria-label=\"refresh npm packages\"\n                      size=\"small\"\n                      onClick={refreshNpm}\n                      disabled={npmLoading}\n                    >\n                      <RefreshIcon fontSize=\"small\" />\n                    </IconButton>\n                  </span>\n                </Tooltip>\n                <Tooltip title=\"Open npm profile\">\n                  <IconButton\n                    aria-label=\"open npm profile\"\n                    size=\"small\"\n                    component=\"a\"\n                    href={npmProfileUrl}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    <OpenInNewIcon fontSize=\"small\" />\n                  </IconButton>\n                </Tooltip>\n              </Stack>\n            </Stack>\n            <Typography variant=\"body2\" sx={{ opacity: 0.8 }}>\n              Recently published / updated packages.\n            </Typography>\n            {npmLoading && (\n              <Box display=\"flex\" justifyContent=\"center\" py={3}>\n                <CircularProgress size={26} />\n              </Box>\n            )}\n            {npmError && !npmLoading && (\n              <Alert severity=\"error\">Failed to load npm packages: {npmError}</Alert>\n            )}\n            {!npmLoading && !npmError && (\n              <List dense aria-label=\"Recent npm packages\" sx={{ width: \"100%\" }}>\n                {npmPackages.slice(0, 8).map((p) => (\n                  <React.Fragment key={p.name}>\n                    <ListItem\n                      disableGutters\n                      secondaryAction={\n                        p.npmUrl ? (\n                          <IconButton\n                            edge=\"end\"\n                            aria-label=\"open package\"\n                            size=\"small\"\n                            href={p.npmUrl}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                          >\n                            <OpenInNewIcon fontSize=\"inherit\" />\n                          </IconButton>\n                        ) : null\n                      }\n                    >\n                      <ListItemText\n                        primary={`${p.name} @ ${p.version}`}\n                        secondary={[\n                          p.description || \"\",\n                          p.publishedAt ? ` ‚Ä¢ ${relativeTime(p.publishedAt)}` : \"\",\n                          typeof p.weeklyDownloads === \"number\"\n                            ? ` ‚Ä¢ ${p.weeklyDownloads.toLocaleString()} downloads/week`\n                            : \"\",\n                        ]\n                          .filter(Boolean)\n                          .join(\"\")}\n                        primaryTypographyProps={{ variant: \"body2\" }}\n                        secondaryTypographyProps={{ variant: \"caption\" }}\n                      />\n                    </ListItem>\n                    <Divider component=\"li\" sx={{ opacity: 0.2 }} />\n                  </React.Fragment>\n                ))}\n                {npmPackages.length === 0 && (\n                  <Typography variant=\"body2\" sx={{ opacity: 0.6, mt: 1 }}>\n                    No published packages.\n                  </Typography>\n                )}\n              </List>\n            )}\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              href={npmProfileUrl}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              sx={{ alignSelf: \"flex-start\" }}\n            >\n              View All on npm\n            </Button>\n          </Stack>\n        </Paper>\n      )}\n\n      {/* GitHub Activity Section (SECOND) */}\n      <Paper\n        elevation={5}\n        sx={{\n          mt: 6,\n            p: { xs: 2, md: 4 },\n          borderRadius: 4,\n          background:\n            theme.palette.mode === \"dark\"\n              ? \"linear-gradient(135deg, rgba(255,255,255,0.045), rgba(255,255,255,0.025))\"\n              : \"linear-gradient(135deg, rgba(0,0,0,0.018), rgba(0,0,0,0.04))\",\n          backdropFilter: \"blur(10px)\",\n        }}\n      >\n        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" sx={{ mb: 2 }}>\n          <Typography variant=\"h5\" fontWeight={600} component=\"h2\">\n            GitHub Activity\n          </Typography>\n          <Stack direction=\"row\" spacing={1} alignItems=\"center\">\n            <Tooltip title=\"Refresh\">\n              <span>\n                <IconButton\n                  aria-label=\"refresh github activity\"\n                  size=\"small\"\n                  onClick={refreshGithub}\n                  disabled={githubLoading}\n                >\n                  <RefreshIcon fontSize=\"small\" />\n                </IconButton>\n              </span>\n            </Tooltip>\n            <ToggleButtonGroup\n              size=\"small\"\n              exclusive\n              value={ghView}\n              onChange={handleGhView}\n              aria-label=\"github activity view mode\"\n            >\n              <ToggleButton value=\"graph\" aria-label=\"graph view\">\n                <TimelineIcon fontSize=\"small\" />\n              </ToggleButton>\n              <ToggleButton value=\"list\" aria-label=\"list view\">\n                <ListIcon fontSize=\"small\" />\n              </ToggleButton>\n            </ToggleButtonGroup>\n            <Tooltip title=\"Open GitHub profile\">\n              <IconButton\n                aria-label=\"open github profile\"\n                size=\"small\"\n                component=\"a\"\n                href=\"https://github.com/Vaporjawn\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <OpenInNewIcon fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n          </Stack>\n        </Stack>\n        {githubLoading && (\n          <Box display=\"flex\" justifyContent=\"center\" py={4}>\n            <CircularProgress size={28} />\n          </Box>\n        )}\n        {githubError && !githubLoading && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            Failed to load GitHub activity: {githubError}\n          </Alert>\n        )}\n        {!githubLoading && !githubError && ghView === \"graph\" && (\n          <Box sx={{ mt: 1 }}>\n            <CommitGraph events={unifiedEvents} maxRepos={8} heightPerNode={40} />\n            <ActivityLegend />\n            {unifiedEvents.length === 0 && (\n              <Typography variant=\"body2\" sx={{ opacity: 0.6, mt: 1 }}>\n                No recent activity.\n              </Typography>\n            )}\n          </Box>\n        )}\n        {!githubLoading && !githubError && ghView === \"list\" && (\n          <List dense aria-label=\"Recent GitHub / npm activity list\" sx={{ width: \"100%\" }}>\n            {unifiedEvents.slice(0, 32).map((evt) => (\n              <React.Fragment key={evt.id}>\n                <ListItem\n                  disableGutters\n                  secondaryAction={\n                    evt.url ? (\n                      <IconButton\n                        edge=\"end\"\n                        aria-label=\"open event\"\n                        size=\"small\"\n                        href={evt.url}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        <OpenInNewIcon fontSize=\"inherit\" />\n                      </IconButton>\n                    ) : null\n                  }\n                >\n                  <ListItemText\n                    primary={evt.message}\n                    secondary={`${evt.lane}${evt.repo ? ` ‚Ä¢ ${evt.repo}` : \"\"} ‚Ä¢ ${relativeTime(\n                      evt.createdAt\n                    )}`}\n                    primaryTypographyProps={{ variant: \"body2\" }}\n                    secondaryTypographyProps={{ variant: \"caption\" }}\n                  />\n                </ListItem>\n                <Divider component=\"li\" sx={{ opacity: 0.2 }} />\n              </React.Fragment>\n            ))}\n            {unifiedEvents.length === 0 && (\n              <Typography variant=\"body2\" sx={{ opacity: 0.6, mt: 1 }}>\n                No recent activity.\n              </Typography>\n            )}\n          </List>\n        )}\n      </Paper>\n\n      <Typography variant=\"body2\" sx={{ mt: 4, opacity: 0.7 }}>\n        GitHub and npm sections use local caching with background refresh to reduce API calls\n        while keeping activity reasonably fresh. ({githubEvents.length} GitHub events / {npmPackages.length} packages)\n      </Typography>\n\n      {/* TODO: Enhance node visuals (shapes/sizes) & add virtualization if event list grows large */}\n      {/* TODO: Add richer tooltips with relative time + repository badges */}\n      </Box>\n    </PullToRefresh>\n  );\n};\n\nexport default ActivityPage;\n"],"names":["DEFAULT_USER","DEFAULT_TTL","DEFAULT_CACHE_KEY","classify","e","type","created_at","repoObj","repo","createdAt","base","kind","message","url","commits","ref","action","prNumber","tag","issueNumber","useGithubActivity","options","username","perPage","cacheTtlMs","includeTypes","events","setEvents","useState","loading","setLoading","error","setError","inFlightRef","useRef","cacheKey","readCache","useCallback","raw","parsed","writeCache","data","payload","fetchData","force","resp","normalized","a","b","useEffect","cached","isFresh","refresh","PALETTE","colorForLane","i","CommitGraph","maxRepos","heightPerNode","legendId","orientation","showDates","theme","useTheme","lanes","rows","trunkLane","accessibleList","useMemo","sorted","githubRepoOrder","otherLaneOrder","otherLaneSet","evt","laneOrder","laneMap","label","idx","trunk","lastDate","date","laneKey","r","lane","l","laneWidth","leftPad","NODE_SIZE_BRANCH","NODE_SIZE_TRUNK","RADIUS_BRANCH","RADIUS_TRUNK","totalHeight","KIND_LABELS","jsxs","Box","jsx","isTrunk","rowIndex","yCenter","trunkX","laneX","kindGlyph","humanKind","isTrunkEvent","React","Tooltip","t","line","KIND_ITEMS","ActivityLegend","Typography","Stack","item","PullToRefresh","onRefresh","children","threshold","pullDistance","setPullDistance","isRefreshing","setIsRefreshing","startY","setStartY","containerRef","handleTouchStart","handleTouchMove","distance","handleTouchEnd","container","pullProgress","CircularProgress","relativeTime","input","diffMs","future","sec","min","hr","day","week","ActivityPage","githubEvents","githubLoading","githubError","refreshGithub","npmPackages","npmLoading","npmError","refreshNpm","useNpmPackages","npmProfileUrl","ghView","setGhView","handleGhView","_","val","unifiedEvents","nowIso","npmEvents","p","handleRefresh","toast","Paper","IconButton","RefreshIcon","OpenInNewIcon","Alert","List","ListItem","ListItemText","Divider","Button","ToggleButtonGroup","ToggleButton","TimelineIcon","ListIcon"],"mappings":"0UAkEA,MAAMA,GAAe,YACfC,GAAc,IAAO,GAAK,GAC1BC,GAAoB,iBAO1B,SAASC,GAASC,EAAuC,CACvD,KAAM,CAAE,KAAAC,EAAM,WAAAC,EAAY,KAAMC,GAAYH,EACtCI,EAAOD,GAAS,MAAQ,UACxBE,EAAYH,EACZI,EAAqD,CACzD,GAAIN,EAAE,GACN,KAAAI,EACA,UAAAC,EACA,IAAK,MAAA,EAIP,IAAIE,EAA2B,QAC3BC,EAAUP,EACVQ,EAEJ,OAAQR,EAAA,CACN,IAAK,YAAa,CAChBM,EAAO,OACP,MAAMG,EAAU,MAAM,QAAQV,EAAE,SAAS,OAAO,EAAIA,EAAE,QAAS,QAAQ,OAAS,EAC1EW,EAAMX,EAAE,SAAS,KAAK,MAAM,GAAG,EAAE,IAAA,EACvCQ,EAAU,UAAUE,CAAO,UAAUA,IAAY,EAAI,GAAK,GAAG,OAAOC,GAAO,MAAM,GACjFF,EAAM,sBAAsBL,CAAI,YAAYO,GAAO,MAAM,GACzD,KACF,CACA,IAAK,mBAAoB,CACvB,MAAMC,EAASZ,EAAE,SAAS,OACpBa,EAAWb,EAAE,SAAS,QAAUA,EAAE,SAAS,cAAc,OAC/DS,EAAMT,EAAE,SAAS,cAAc,SAC3BY,IAAW,UACbL,EAAO,UACPC,EAAU,cAAcK,CAAQ,OAAOT,CAAI,IAClCQ,IAAW,UAAYZ,EAAE,SAAS,cAAc,QACzDO,EAAO,WACPC,EAAU,cAAcK,CAAQ,OAAOT,CAAI,KAE3CG,EAAO,QACPC,EAAU,MAAMI,CAAM,KAAKC,CAAQ,OAAOT,CAAI,IAEhD,KACF,CACA,IAAK,eAAgB,CACnBG,EAAO,UACP,MAAMO,EAAMd,EAAE,SAAS,SAAS,SAChCS,EAAMT,EAAE,SAAS,SAAS,SAC1BQ,EAAU,qBAAqBM,GAAO,YAAY,OAAOV,CAAI,GAC7D,KACF,CACA,IAAK,YAAa,CAChBG,EAAO,OACPE,EAAMT,EAAE,SAAS,QAAQ,SACzBQ,EAAU,UAAUJ,CAAI,GACxB,KACF,CACA,IAAK,aAAc,CACjBG,EAAO,OACPC,EAAU,WAAWJ,CAAI,GACzBK,EAAM,sBAAsBL,CAAI,GAChC,KACF,CACA,IAAK,cAAe,CAClB,MAAMQ,EAASZ,EAAE,SAAS,OACpBe,EAAcf,EAAE,SAAS,OAAO,OACtCS,EAAMT,EAAE,SAAS,OAAO,SACpBY,IAAW,UACbL,EAAO,aACPC,EAAU,iBAAiBO,CAAW,OAAOX,CAAI,KAEjDG,EAAO,QACPC,EAAU,SAASI,CAAM,KAAKG,CAAW,OAAOX,CAAI,IAEtD,KACF,CACA,IAAK,oBAAqB,CACxBG,EAAO,gBACP,MAAMQ,EAAcf,EAAE,SAAS,OAAO,OACtCS,EAAMT,EAAE,SAAS,SAAS,UAAYA,EAAE,SAAS,OAAO,SACxDQ,EAAU,uBAAuBO,CAAW,OAAOX,CAAI,GACvD,KACF,CACA,QACEG,EAAO,QACPC,EAAUP,EAAK,QAAQ,SAAU,EAAE,EAAI,OAAOG,CAAI,GAClDK,EAAM,sBAAsBL,CAAI,EAClC,CAGF,MAAO,CAAE,GAAGE,EAAM,KAAAC,EAAM,QAAAC,EAAS,IAAAC,CAAA,CACnC,CAEO,SAASO,GAAkBC,EAAoC,GAA4B,CAChG,KAAM,CACJ,SAAAC,EAAWtB,GACX,QAAAuB,EAAU,GACV,WAAAC,EAAavB,GACb,aAAAwB,CAAA,EACEJ,EAEE,CAACK,EAAQC,CAAS,EAAIC,EAAAA,SAA+B,CAAA,CAAE,EACvD,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAkB,EAAK,EAC/C,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAwB,IAAI,EAChDK,EAAcC,EAAAA,OAAgB,EAAK,EAEnCC,EAAW,GAAGjC,EAAiB,IAAIoB,CAAQ,IAAIC,CAAO,GAEtDa,EAAYC,EAAAA,YAAY,IAAyB,CACrD,GAAI,CACF,MAAMC,EAAM,aAAa,QAAQH,CAAQ,EACzC,GAAI,CAACG,EAAK,OAAO,KACjB,MAAMC,EAAS,KAAK,MAAMD,CAAG,EAC7B,MAAI,CAACC,EAAO,WAAa,CAAC,MAAM,QAAQA,EAAO,IAAI,EAAU,KACtDA,CACT,MAAQ,CACN,OAAO,IACT,CACF,EAAG,CAACJ,CAAQ,CAAC,EAEPK,EAAaH,EAAAA,YAChBI,GAA+B,CAC9B,GAAI,CACF,MAAMC,EAAsB,CAAE,UAAW,KAAK,IAAA,EAAO,KAAAD,CAAA,EACrD,aAAa,QAAQN,EAAU,KAAK,UAAUO,CAAO,CAAC,CACxD,MAAQ,CAER,CACF,EACA,CAACP,CAAQ,CAAA,EAGLQ,EAAYN,EAAAA,YAAY,MAAOO,EAAQ,KAAU,CACrD,GAAI,CAAAX,EAAY,QAChB,CAAAA,EAAY,QAAU,GACtBH,EAAW,EAAI,EACfE,EAAS,IAAI,EACb,GAAI,CACF,MAAMnB,EAAM,gCAAgC,mBAAmBS,CAAQ,CAAC,2BAA2BC,CAAO,GACpGsB,EAAO,MAAM,MAAMhC,EAAK,CAC5B,QAAS,CAEP,OAAQ,6BAAA,CACV,CACD,EACD,GAAI,CAACgC,EAAK,GAAI,MAAM,IAAI,MAAM,2BAA2BA,EAAK,MAAM,GAAG,EAEvE,IAAIC,GAD2B,MAAMD,EAAK,KAAA,GACpB,IAAI1C,EAAQ,EAC9BsB,GAAgBA,EAAa,SAC/BqB,EAAaA,EAAW,OAAQ1C,GAAMqB,EAAa,SAASrB,EAAE,IAAI,CAAC,GAGrE0C,EAAW,KAAK,CAACC,EAAGC,IAAM,IAAI,KAAKA,EAAE,SAAS,EAAE,QAAA,EAAY,IAAI,KAAKD,EAAE,SAAS,EAAE,SAAS,EAC3FpB,EAAUmB,CAAU,EACpBN,EAAWM,CAAU,CACvB,OAAS1C,EAAY,CACdwC,IACCxC,aAAa,MAAO4B,EAAS5B,EAAE,OAAO,IAAiB,gCAAgC,EAE/F,QAAA,CACE0B,EAAW,EAAK,EAChBG,EAAY,QAAU,EACxB,EACF,EAAG,CAACX,EAAUC,EAASE,EAAce,CAAU,CAAC,EAEhDS,EAAAA,UAAU,IAAM,CACd,MAAMC,EAASd,EAAA,EACf,GAAIc,EAAQ,CACV,MAAMC,EAAU,KAAK,IAAA,EAAQD,EAAO,UAAY1B,EAChDG,EAAUuB,EAAO,IAAI,EAChBC,GAASR,EAAA,CAChB,MACEA,EAAA,CAEJ,EAAG,CAACnB,EAAYY,EAAWO,CAAS,CAAC,EAErC,MAAMS,EAAUf,EAAAA,YAAY,IAAM,CAChCM,EAAU,EAAI,CAChB,EAAG,CAACA,CAAS,CAAC,EAEd,MAAO,CAAE,OAAAjB,EAAQ,QAAAG,EAAS,MAAAE,EAAO,QAAAqB,CAAA,CACnC,CCpNA,MAAMC,EAAU,CACd,UACA,UACA,UACA,UACA,UACA,UACA,UACA,SACF,EAEA,SAASC,GAAaC,EAAW,CAAE,OAAOF,EAAQE,EAAIF,EAAQ,MAAM,CAAG,CAMhE,MAAMG,GAA0C,CAAC,CACtD,OAAA9B,EACA,SAAA+B,EAAW,GACX,cAAAC,EAAgB,GAChB,SAAAC,EAAW,kBACX,YAAAC,EAAc,OACd,UAAAC,EAAY,EACd,IAAM,CACJ,MAAMC,EAAQC,EAAA,EAGR,CAAE,MAAAC,EAAO,KAAAC,EAAM,UAAAC,EAAW,eAAAC,CAAA,EAAmBC,EAAAA,QAAQ,IAAM,CAC/D,GAAI,CAAC1C,EAAO,OACV,MAAO,CAAE,MAAO,CAAA,EAAkB,KAAM,CAAA,EAAa,UAAW,OAAmC,eAAgB,EAAC,EAGtH,MAAM2C,EAAS,CAAC,GAAG3C,CAAM,EAAE,KAAK,CAACqB,EAAGC,IAAM,IAAI,KAAKD,EAAE,SAAS,EAAE,UAAY,IAAI,KAAKC,EAAE,SAAS,EAAE,SAAS,EACvGY,IAAgB,QAAQS,EAAO,QAAA,EAGnC,MAAMC,EAA4B,CAAA,EAC5BC,EAA2B,CAAA,EAC3BC,MAAmB,IAEzBH,EAAO,QAAQI,GAAO,CAChBA,EAAI,OAAS,UAAYA,EAAI,KAC1BH,EAAgB,SAASG,EAAI,IAAI,GAAGH,EAAgB,KAAKG,EAAI,IAAI,EAC7DA,EAAI,MAAQA,EAAI,OAAS,WAC7BD,EAAa,IAAIC,EAAI,IAAI,IAAKD,EAAa,IAAIC,EAAI,IAAI,EAAGF,EAAe,KAAKE,EAAI,IAAI,GAE/F,CAAC,EAED,MAAMC,EAAsB,CAAC,SAAU,GAAGJ,EAAiB,GAAGC,CAAc,EACtEI,MAAc,IACpBD,EAAU,MAAM,EAAGjB,CAAQ,EAAE,QAAQ,CAACmB,EAAOC,IAAQF,EAAQ,IAAIC,EAAO,CAAE,MAAAA,EAAO,MAAOtB,GAAauB,CAAG,EAAG,MAAOA,CAAA,CAAK,CAAC,EACxH,MAAMC,EAAQH,EAAQ,IAAI,QAAQ,EAG5BV,EAAc,CAAA,EACpB,IAAIc,EACJV,EAAO,QAASI,GAAQ,CACtB,MAAMO,EAAOP,EAAI,UAAU,MAAM,EAAG,EAAE,EAClCZ,GAAamB,IAASD,IACxBd,EAAK,KAAK,CAAE,KAAM,OAAQ,KAAAe,EAAM,EAChCD,EAAWC,GAEb,IAAIC,EACAR,EAAI,OAAS,UAAYA,EAAI,OAAgBA,EAAI,KAC5CA,EAAI,OAAS,SAAUQ,EAAU,SACrCA,EAAUR,EAAI,MAAQA,EAAI,MAAQ,OACvCR,EAAK,KAAK,CAAE,KAAM,QAAS,IAAAQ,EAAK,QAAAQ,EAAS,KAAMN,EAAQ,IAAIM,CAAO,CAAA,CAAG,CACvE,CAAC,EAED,MAAMd,EAAiBF,EAAK,OAAOiB,GAAKA,EAAE,OAAS,OAAO,EAAE,IAAIA,GAAK,CACnE,MAAM9E,EAAK8E,EAAsC,IAAWC,EAAQD,EAAsC,QAC1G,MAAO,GAAG9E,EAAE,SAAS,MAAM+E,CAAI,KAAK/E,EAAE,OAAO,EAC/C,CAAC,EAED,MAAO,CAAE,MAAOsE,EAAU,MAAM,EAAGjB,CAAQ,EAAE,IAAI2B,GAAKT,EAAQ,IAAIS,CAAC,CAAE,EAAG,KAAAnB,EAAM,UAAWa,EAAO,eAAAX,CAAAA,CAClG,EAAG,CAACzC,EAAQ+B,EAAUG,EAAaC,CAAS,CAAC,EAEvCwB,EAAY,GACZC,EAAU,GACVC,EAAmB,GACnBC,EAAkB,GAClBC,EAAgBF,EAAmB,EACnCG,EAAeF,EAAkB,EACjCG,EAAc1B,EAAK,OAASP,EAAgB,GAE5CkC,EAAsC,CAC1C,KAAM,OACN,UAAW,YACX,WAAY,YACZ,QAAS,UACT,KAAM,OACN,KAAM,OACN,aAAc,eACd,gBAAiB,gBACjB,cAAe,aAAA,EAGjB,OACEC,EAAAA,KAACC,EAAA,CAAI,GAAI,CAAE,SAAU,WAAY,MAAO,OAAQ,UAAW,OAAQ,GAAI,CAAA,EAErE,SAAA,CAAAC,EAAAA,IAACD,EAAA,CAAI,GAAI,CAAE,QAAS,OAAQ,cAAe,MAAO,GAAIR,EAAS,GAAI,CAAA,EAChE,SAAAtB,EAAM,IAAIoB,GAAK,CACd,MAAMY,EAAUZ,EAAE,QAAU,SAC5B,OACEW,EAAAA,IAACD,EAAA,CAAkB,GAAI,CAAE,MAAOT,EAAW,GAAI,EAAG,UAAW,SAAU,SAAU,GAAI,MAAOD,EAAE,MAAO,WAAY,SAAU,SAAU,SAAU,aAAc,WAAY,WAAYY,EAAU,IAAM,IAAK,SAAU,WAAY,UAAWA,EAAU,CAAE,QAAS,UAAa,SAAU,WAAY,KAAM,EAAG,MAAO,EAAG,IAAK,OAAQ,SAAU,EAAG,cAAe,GAAK,QAAS,KAAS,MAAA,EAAa,MAAOZ,EAAE,MAAM,MAAM,GAAG,EAAE,IAAA,EAC1Z,SAAAA,EAAE,QAAU,SAAW,SAAWA,EAAE,MAAM,MAAM,GAAG,EAAE,IAAA,CAAI,EADlDA,EAAE,KAEZ,CAEJ,CAAC,CAAA,CACH,EACAS,EAAAA,KAACC,EAAA,CAAI,GAAI,CAAE,SAAU,WAAY,OAAQH,EAAa,GAAIL,CAAA,EAEvD,SAAA,CAAApB,GACC6B,EAAAA,IAACD,EAAA,CAAI,GAAI,CAAE,SAAU,WAAY,KAAM5B,EAAU,OAASmB,EAAY,IAAMA,EAAY,EAAG,IAAK,EAAG,OAAQ,EAAG,MAAO,EAAG,QAASvB,EAAM,QAAQ,OAAS,OAAS,yBAA2B,kBAAA,CAAmB,CAAG,EAGnNG,EAAK,IAAI,CAACiB,EAAGe,IAAa,CACzB,MAAMC,EAAUD,EAAWvC,EAAgB,EAC3C,GAAIwB,EAAE,OAAS,OACb,OACEa,EAAAA,IAACD,EAAA,CAAuC,GAAI,CAAE,SAAU,WAAY,KAAM,EAAG,IAAKI,EAAU,GAAI,OAAQxC,EAAe,QAAS,OAAQ,WAAY,SAAU,SAAU,GAAI,WAAY,IAAK,MAAO,gBAAA,EACjM,SAAAwB,EAAE,IAAA,EADK,QAAQA,EAAE,IAAI,IAAIe,CAAQ,EAEpC,EAGJ,GAAI,CAACf,EAAE,IAAK,OAAO,KACnB,KAAM,CAAE,KAAAC,GAASD,EACXiB,EAASjC,EAAYA,EAAU,OAASmB,EAAY,IAAMA,EAAY,EAAI,EAC1Ee,EAAQjB,EAAOA,EAAK,OAASE,EAAY,IAAMA,EAAY,EAAIc,EAE/DE,GAAa,IAAM,CACvB,OAAQnB,EAAE,IAAK,KAAA,CACb,IAAK,OAAQ,MAAO,IACpB,IAAK,UAAW,MAAO,KACvB,IAAK,WAAY,MAAO,IACxB,IAAK,UAAW,MAAO,IACvB,IAAK,OAAQ,MAAO,IACpB,IAAK,OAAQ,MAAO,IACpB,IAAK,aAAc,MAAO,IAC1B,IAAK,gBAAiB,MAAO,KAC7B,IAAK,cAAe,MAAO,KAC3B,QAAS,MAAO,GAAA,CAEpB,GAAA,EACMoB,EAAYV,EAAYV,EAAE,IAAI,IAAI,GAAMA,EAAE,IAAI,KAAK,OAAO,CAAC,EAAE,cAAgBA,EAAE,IAAI,KAAK,MAAM,CAAC,EAC/FqB,EAAepB,GAAM,QAAU,SACrC,OACEU,OAACW,EAAM,SAAN,CAEE,SAAA,CAAA,CAACD,GACAR,EAAAA,IAACD,EAAA,CAAI,GAAI,CAAE,SAAU,WAAY,KAAM,KAAK,IAAIK,EAAQC,CAAK,EAAG,IAAKF,EAAS,MAAO,KAAK,IAAIE,EAAQD,CAAM,EAAG,OAAQ,EAAG,QAAShB,GAAM,OAAS,UAAW,QAAS,IAAM,cAAe,QAAU,EAGtMjB,SACE4B,EAAA,CAAI,GAAI,CAAE,SAAU,WAAY,KAAMK,EAAST,EAAc,IAAKQ,EAAUR,EAAc,MAAOF,EAAiB,OAAQA,EAAiB,aAAc,MAAO,gBAAiB1B,EAAM,QAAQ,WAAW,MAAO,OAAQ,aAAaA,EAAM,QAAQ,OAAO,GAAI,UAAW,aAAc,cAAe,OAAQ,QAAS,OAAQ,WAAY,SAAU,eAAgB,SAAU,SAAU,EAAG,WAAY,IAAK,MAAO,gBAAA,EAAoB,cAAY,MAAA,CAEtb,QAGD2C,EAAA,CAAQ,MAAO,GAAGvB,EAAE,IAAI,OAAO;AAAA,EAAKoB,CAAS,MAAOpB,EAAE,IAAI,MAAQA,EAAE,IAAI,MAAQ,QAAS,GACxF,SAAAa,MAACD,EAAA,CAAI,UAAWZ,EAAE,IAAI,IAAM,IAAM,MAAO,KAAMA,EAAE,IAAI,IAAK,OAAQA,EAAE,IAAI,IAAM,SAAW,OAAW,IAAKA,EAAE,IAAI,IAAM,sBAAwB,OAAW,aAAY,GAAGoB,CAAS,aAAcpB,EAAE,IAAI,MAAQA,EAAE,IAAI,MAAQ,QAAS,MAAMA,EAAE,IAAI,OAAO,GAAI,mBAAkBvB,EAAU,SAAU,EAAG,GAAI,CAAE,SAAU,WAAY,KAAMyC,GAASG,EAAeb,EAAeD,GAAgB,IAAKS,GAAWK,EAAeb,EAAeD,GAAgB,MAAOc,EAAef,EAAkBD,EAAkB,OAAQgB,EAAef,EAAkBD,EAAkB,aAAc,MAAO,gBAAiBgB,EAAezC,EAAM,QAAQ,QAAQ,KAAQqB,GAAM,OAASrB,EAAM,QAAQ,UAAU,KAAO,MAAOA,EAAM,QAAQ,gBAAgByC,EAAezC,EAAM,QAAQ,QAAQ,KAAQqB,GAAM,OAASrB,EAAM,QAAQ,UAAU,IAAK,EAAG,SAAUyC,EAAe,EAAI,GAAI,WAAY,IAAK,QAAS,OAAQ,WAAY,SAAU,eAAgB,SAAU,eAAgB,OAAQ,UAAYG,GAAM,aAAaA,EAAE,QAAQ,WAAW,OAAO,+BAAgC,WAAY,kCAAmC,UAAW,CAAE,UAAW,eAAiB,kBAAmB,CAAE,QAAS,iBAAkB,cAAe,EAAG,UAAW,aAAA,CAAc,EACvsC,WACH,EACF,EAEAb,EAAAA,KAACC,EAAA,CAAI,GAAI,CAAE,SAAU,WAAY,KAAM,KAAK,IAAIM,EAAOD,CAAM,GAAKI,EAAeb,EAAeD,GAAiB,GAAI,IAAKS,GAAWK,EAAeb,EAAeD,GAAiB,EAAG,WAAYc,EAAef,EAAkBD,GAAoB,EAAG,QAAS,OAAQ,WAAY,SAAU,SAAU,GAAI,GAAI,EAAG,SAAU,eAAe,KAAK,IAAIa,EAAOD,CAAM,GAAKI,EAAeb,EAAeD,GAAiB,EAAE,MAAO,MAAO,iBAAkB,WAAY,IAAK,WAAY,SAAU,SAAU,SAAU,aAAc,WAAY,cAAe,MAAA,EAAU,cAAY,OACnjB,SAAA,CAAAP,EAAE,IAAI,QACPW,EAAAA,KAACC,EAAA,CAAI,UAAU,OAAO,GAAI,CAAE,GAAI,IAAM,QAAS,IAAM,SAAU,EAAA,EAAM,SAAA,CAAA,IAAEQ,EAAU,GAAA,CAAA,CAAC,CAAA,CAAA,CACpF,CAAA,GArBmBpB,EAAE,IAAI,EAsB3B,CAEJ,CAAC,EAEDa,EAAAA,IAACD,EAAA,CAAI,UAAU,KAAK,aAAW,8BAA8B,GAAI,CAAE,SAAU,WAAY,KAAM,MAAO,MAAO,EAAG,OAAQ,EAAG,SAAU,SAAU,EAAG,EAAG,EAAG,CAAA,EACrJ,SAAA3B,EAAe,IAAI,CAACwC,EAAMpD,IACzBwC,EAAAA,IAAC,KAAA,CAAY,SAAAY,CAAA,EAAJpD,CAAS,CACnB,CAAA,CACH,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,ECrNMqD,GAA2B,CAC/B,CAAE,MAAO,OAAQ,MAAO,IAAK,YAAa,6BAAA,EAC1C,CAAE,MAAO,YAAa,MAAO,KAAM,YAAa,qBAAA,EAChD,CAAE,MAAO,YAAa,MAAO,IAAK,YAAa,qBAAA,EAC/C,CAAE,MAAO,UAAW,MAAO,IAAK,YAAa,yBAAA,EAC7C,CAAE,MAAO,OAAQ,MAAO,IAAK,YAAa,mBAAA,EAC1C,CAAE,MAAO,OAAQ,MAAO,IAAK,YAAa,oBAAA,EAC1C,CAAE,MAAO,eAAgB,MAAO,IAAK,YAAa,eAAA,EAClD,CAAE,MAAO,gBAAiB,MAAO,KAAM,YAAa,qBAAA,EACpD,CAAE,MAAO,cAAe,MAAO,KAAM,YAAa,kCAAA,CACpD,EAEaC,GAA2B,IAEpChB,EAAAA,KAACC,EAAA,CACC,UAAU,UACV,kBAAgB,0BAChB,GAAG,kBACH,GAAI,CACF,GAAI,EACJ,EAAG,EACH,aAAc,EACd,OAAQhC,GAAS,aAAaA,EAAM,QAAQ,OAAO,GACzD,WAAYA,GAASA,EAAM,QAAQ,OAAS,OAAS,yBAA2B,kBAAA,EAG5E,SAAA,CAAAiC,EAAAA,IAACe,EAAA,CAAW,GAAG,0BAA0B,QAAQ,YAAY,WAAY,IAAK,aAAY,GAAC,SAAA,uBAAA,CAE3F,EACAjB,EAAAA,KAACiB,EAAA,CAAW,QAAQ,UAAU,UAAU,IAAI,GAAI,CAAE,GAAI,EAAG,WAAY,GAAA,EAAO,SAAA,CAAA,yLAC4Gf,EAAAA,IAAC,UAAO,SAAA,KAAA,CAAG,EAAS,yEAAA,EAC5M,EACAA,EAAAA,IAACgB,EAAA,CAAM,UAAU,MAAM,SAAS,OAAO,QAAS,IAAK,WAAU,GAC5D,SAAAH,GAAW,IAAII,GACdnB,EAAAA,KAACkB,EAAA,CAEC,UAAU,MACV,QAAS,IACT,WAAW,SACX,GAAI,CAAE,SAAU,GAAA,EAEhB,SAAA,CAAAhB,EAAAA,IAACD,EAAA,CACC,cAAW,GACX,GAAI,CACF,MAAO,GACP,OAAQ,GACR,aAAc,MACd,QAAS,eACT,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,SAAU,GACV,WAAY,GAAA,EAGb,SAAAkB,EAAK,KAAA,CAAA,EAERnB,OAACC,GAAI,GAAI,CAAE,SAAU,GAAI,WAAY,KACnC,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAQ,WAAK,KAAA,CAAM,EACpBA,EAAAA,IAACD,EAAA,CAAI,UAAU,OAAO,GAAI,CAAE,GAAI,GAAK,QAAS,GAAA,EAC3C,SAAAkB,EAAK,WAAA,CACR,CAAA,CAAA,CACF,CAAA,CAAA,EA3BKA,EAAK,KAAA,CA6Bb,CAAA,CACH,CAAA,CAAA,CAAA,EClEAC,GAA8C,CAAC,CACnD,UAAAC,EACA,SAAAC,EACA,UAAAC,EAAY,EACd,IAAM,CACJ,KAAM,CAACC,EAAcC,CAAe,EAAI1F,EAAAA,SAAS,CAAC,EAC5C,CAAC2F,EAAcC,CAAe,EAAI5F,EAAAA,SAAS,EAAK,EAChD,CAAC6F,EAAQC,CAAS,EAAI9F,EAAAA,SAAS,CAAC,EAChC+F,EAAezF,EAAAA,OAAuB,IAAI,EAE1C0F,EAAmBvF,cAAajC,GAAkB,CAClD,OAAO,UAAY,GACrBsH,EAAUtH,EAAE,QAAQ,CAAC,EAAE,OAAO,CAElC,EAAG,CAAA,CAAE,EAECyH,EAAkBxF,cAAajC,GAAkB,CACrD,GAAIqH,IAAW,GAAK,OAAO,QAAU,GAAKF,EAAc,OAGxD,MAAMO,EADW1H,EAAE,QAAQ,CAAC,EAAE,QACFqH,EAExBK,EAAW,GACbR,EAAgB,KAAK,IAAIQ,EAAUV,EAAY,GAAG,CAAC,CAEvD,EAAG,CAACK,EAAQF,EAAcH,CAAS,CAAC,EAE9BW,EAAiB1F,EAAAA,YAAY,SAAY,CAC7C,GAAIgF,GAAgBD,GAAa,CAACG,EAAc,CAC9CC,EAAgB,EAAI,EACpB,GAAI,CACF,MAAMN,EAAA,CACR,OAASnF,EAAO,CACd,QAAQ,MAAM,kBAAmBA,CAAK,CACxC,QAAA,CACEyF,EAAgB,EAAK,CACvB,CACF,CACAF,EAAgB,CAAC,EACjBI,EAAU,CAAC,CACb,EAAG,CAACL,EAAcD,EAAWG,EAAcL,CAAS,CAAC,EAErDjE,EAAAA,UAAU,IAAM,CACd,MAAM+E,EAAYL,EAAa,QAC/B,GAAKK,EAEL,OAAAA,EAAU,iBAAiB,aAAcJ,EAAkB,CACzD,QAAS,EAAA,CACV,EACDI,EAAU,iBAAiB,YAAaH,EAAiB,CAAE,QAAS,GAAM,EAC1EG,EAAU,iBAAiB,WAAYD,CAAc,EAE9C,IAAM,CACXC,EAAU,oBAAoB,aAAcJ,CAAgB,EAC5DI,EAAU,oBAAoB,YAAaH,CAAe,EAC1DG,EAAU,oBAAoB,WAAYD,CAAc,CAC1D,CACF,EAAG,CAACN,EAAQJ,EAAcE,EAAcK,EAAkBC,EAAiBE,CAAc,CAAC,EAE1F,MAAME,EAAe,KAAK,IAAKZ,EAAeD,EAAa,IAAK,GAAG,EAEnE,OACEvB,OAACC,EAAA,CAAI,IAAK6B,EAAc,GAAI,CAAE,SAAU,WAAY,SAAU,QAAA,EAE5D,SAAA,CAAA5B,EAAAA,IAACD,EAAA,CACC,GAAI,CACF,SAAU,WACV,IAAK,EACL,KAAM,EACN,MAAO,EACP,OAAQuB,EACR,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,WAAYE,EACR,uBACA,OACJ,OAAQ,IACR,QAAS,kBAAA,EAGT,UAAAF,EAAe,GAAKE,IACpBxB,EAAAA,IAACmC,EAAA,CACC,QAASX,EAAe,gBAAkB,cAC1C,MAAOU,EACP,KAAM,EAAA,CAAA,CACR,CAAA,EAKJlC,EAAAA,IAACD,EAAA,CACC,GAAI,CACF,UAAW,cAAcuB,CAAY,MACrC,WAAYA,IAAiB,EAAI,0BAA4B,MAAA,EAG9D,SAAAF,CAAA,CAAA,CACH,EACF,CAEJ,EC7EA,SAASgB,EAAaC,EAAuC,CAC3D,GAAI,CACF,MAAMpD,EAAO,IAAI,KAAKoD,CAAK,EAE3B,IAAIC,EADQ,KAAK,IAAA,EACErD,EAAK,QAAA,EACxB,MAAMsD,EAASD,EAAS,EACxBA,EAAS,KAAK,IAAIA,CAAM,EAExB,MAAME,EAAM,KAAK,MAAMF,EAAS,GAAI,EACpC,GAAIE,EAAM,GAAI,OAAOD,EAAS,eAAiB,WAC/C,MAAME,EAAM,KAAK,MAAMD,EAAM,EAAE,EAC/B,GAAIC,EAAM,GAAI,OAAOF,EAAS,MAAME,CAAG,IAAM,GAAGA,CAAG,QACnD,MAAMC,EAAK,KAAK,MAAMD,EAAM,EAAE,EAC9B,GAAIC,EAAK,GAAI,OAAOH,EAAS,MAAMG,CAAE,IAAM,GAAGA,CAAE,QAChD,MAAMC,EAAM,KAAK,MAAMD,EAAK,EAAE,EAC9B,GAAIC,EAAM,EAAG,OAAOJ,EAAS,MAAMI,CAAG,IAAM,GAAGA,CAAG,QAClD,MAAMC,EAAO,KAAK,MAAMD,EAAM,CAAC,EAC/B,OAAIC,EAAO,EAAUL,EAAS,MAAMK,CAAI,IAAM,GAAGA,CAAI,QAG9C3D,EAAK,mBAAmB,OAAW,CACxC,MAAO,QACP,IAAK,UACL,SAAU,OAAO,gBAAkBA,EAAK,cAAgB,OAAY,SAAA,CACrE,CACH,MAAQ,CACN,MAAO,EACT,CACF,CAGA,MAAM4D,GAAyB,IAAM,CACnC,MAAM9E,EAAQC,EAAA,EAGR,CACJ,OAAQ8E,EACR,QAASC,EACT,MAAOC,EACP,QAASC,CAAA,EACP5H,GAAA,EACE,CACJ,SAAU6H,EACV,QAASC,EACT,MAAOC,EACP,QAASC,CAAA,EACPC,GAAA,EAEEC,EAAgB,mCAGhB,CAACC,EAAQC,CAAS,EAAI5H,EAAAA,SAA2B,OAAO,EACxD6H,EAAepH,EAAAA,YACnB,CAACqH,EAAYC,IAAiC,CACxCA,KAAeA,CAAG,CACxB,EACA,CAAA,CAAC,EAIGC,EAAoCxF,EAAAA,QAAQ,IAAM,CACtD,MAAMyF,EAAS,IAAI,KAAA,EAAO,YAAA,EACpBC,EAAgCb,EAAY,IAAKc,IAAO,CAC5D,GAAI,OAAOA,EAAE,IAAI,IAAIA,EAAE,OAAO,IAAIA,EAAE,aAAe,SAAS,GAC5D,UAAWA,EAAE,aAAeF,EAC5B,QAAS,GAAGE,EAAE,IAAI,KAAKA,EAAE,OAAO,aAChC,KAAM,cACN,KAAM,MACN,IAAKA,EAAE,MAAA,EACP,EAMF,MAAO,CAAC,GAJ6BlB,EAAa,IAAKzI,IAAO,CAC5D,GAAGA,EACH,KAAM,QAAA,EACN,EACmB,GAAG0J,CAAS,EAAE,KACjC,CAAC/G,EAAGC,IAAM,IAAI,KAAKA,EAAE,SAAS,EAAE,QAAA,EAAY,IAAI,KAAKD,EAAE,SAAS,EAAE,QAAA,CAAQ,CAE9E,EAAG,CAAC8F,EAAcI,CAAW,CAAC,EAGxBe,EAAgB3H,EAAAA,YAAY,SAAY,CAC5C,GAAI,CACF,MAAM,QAAQ,IAAI,CAAC2G,IAAiBI,EAAA,CAAY,CAAC,EACjDa,EAAM,QAAQ,kCAAkC,CAClD,MAAiB,CACfA,EAAM,MAAM,4BAA4B,CAC1C,CACF,EAAG,CAACjB,EAAeI,CAAU,CAAC,EAE9B,OACErD,EAAAA,IAACkB,GAAA,CAAc,UAAW+C,EACxB,SAAAnE,OAACC,EAAA,CAAI,GAAI,CAAE,SAAU,KAAM,GAAI,OAAQ,GAAI,CAAE,GAAI,EAAG,GAAI,CAAA,EAAK,GAAI,CAAE,GAAI,EAAG,GAAI,CAAA,CAAE,EAChF,SAAA,CAAAC,EAAAA,IAACe,GAAW,QAAQ,KAAK,WAAY,IAAK,aAAY,GAAC,SAAA,UAAA,CAEvD,EACAf,EAAAA,IAACe,EAAA,CAAW,QAAQ,QAAQ,GAAI,CAAE,QAAS,IAAM,GAAI,CAAA,EAAK,SAAA,iIAAA,CAG1D,EAIEf,EAAAA,IAACmE,EAAA,CACC,UAAW,EACX,GAAI,CACF,EAAG,CAAE,GAAI,EAAG,GAAI,CAAA,EAChB,aAAc,EACd,WACEpG,EAAM,QAAQ,OAAS,OACnB,4EACA,+DACN,eAAgB,YAAA,EAGlB,SAAA+B,EAAAA,KAACkB,EAAA,CAAM,QAAS,EACd,SAAA,CAAAlB,OAACkB,GAAM,UAAU,MAAM,WAAW,SAAS,eAAe,gBACxD,SAAA,CAAAhB,EAAAA,IAACe,GAAW,QAAQ,KAAK,WAAY,IAAK,UAAU,KAAK,SAAA,cAAA,CAEzD,SACCC,EAAA,CAAM,UAAU,MAAM,QAAS,EAAG,WAAW,SAC5C,SAAA,CAAAhB,MAACU,EAAA,CAAQ,MAAM,UACb,SAAAV,MAAC,OAAA,CACC,SAAAA,EAAAA,IAACoE,EAAA,CACC,aAAW,uBACX,KAAK,QACL,QAASf,EACT,SAAUF,EAEV,SAAAnD,EAAAA,IAACqE,EAAA,CAAY,SAAS,OAAA,CAAQ,CAAA,CAAA,EAElC,CAAA,CACF,EACArE,EAAAA,IAACU,EAAA,CAAQ,MAAM,mBACb,SAAAV,EAAAA,IAACoE,EAAA,CACC,aAAW,mBACX,KAAK,QACL,UAAU,IACV,KAAMb,EACN,OAAO,SACP,IAAI,sBAEJ,SAAAvD,EAAAA,IAACsE,EAAA,CAAc,SAAS,OAAA,CAAQ,CAAA,CAAA,CAClC,CACF,CAAA,CAAA,CACF,CAAA,EACF,EACAtE,EAAAA,IAACe,GAAW,QAAQ,QAAQ,GAAI,CAAE,QAAS,EAAA,EAAO,SAAA,wCAAA,CAElD,EACCoC,GACCnD,EAAAA,IAACD,EAAA,CAAI,QAAQ,OAAO,eAAe,SAAS,GAAI,EAC9C,SAAAC,EAAAA,IAACmC,EAAA,CAAiB,KAAM,GAAI,EAC9B,EAEDiB,GAAY,CAACD,GACZrD,EAAAA,KAACyE,EAAA,CAAM,SAAS,QAAQ,SAAA,CAAA,gCAA8BnB,CAAA,EAAS,EAEhE,CAACD,GAAc,CAACC,UACdoB,EAAA,CAAK,MAAK,GAAC,aAAW,sBAAsB,GAAI,CAAE,MAAO,QACvD,SAAA,CAAAtB,EAAY,MAAM,EAAG,CAAC,EAAE,IAAKc,GAC5BlE,OAACW,EAAM,SAAN,CACC,SAAA,CAAAT,EAAAA,IAACyE,EAAA,CACC,eAAc,GACd,gBACET,EAAE,OACAhE,EAAAA,IAACoE,EAAA,CACC,KAAK,MACL,aAAW,eACX,KAAK,QACL,KAAMJ,EAAE,OACR,OAAO,SACP,IAAI,sBAEJ,SAAAhE,EAAAA,IAACsE,EAAA,CAAc,SAAS,SAAA,CAAU,CAAA,CAAA,EAElC,KAGN,SAAAtE,EAAAA,IAAC0E,EAAA,CACC,QAAS,GAAGV,EAAE,IAAI,MAAMA,EAAE,OAAO,GACjC,UAAW,CACTA,EAAE,aAAe,GACjBA,EAAE,YAAc,MAAM5B,EAAa4B,EAAE,WAAW,CAAC,GAAK,GACtD,OAAOA,EAAE,iBAAoB,SACzB,MAAMA,EAAE,gBAAgB,gBAAgB,kBACxC,EAAA,EAEH,OAAO,OAAO,EACd,KAAK,EAAE,EACV,uBAAwB,CAAE,QAAS,OAAA,EACnC,yBAA0B,CAAE,QAAS,SAAA,CAAU,CAAA,CACjD,CAAA,EAEFhE,MAAC2E,GAAQ,UAAU,KAAK,GAAI,CAAE,QAAS,GAAI,CAAG,CAAA,GAjC3BX,EAAE,IAkCvB,CACD,EACAd,EAAY,SAAW,GACtBlD,EAAAA,IAACe,GAAW,QAAQ,QAAQ,GAAI,CAAE,QAAS,GAAK,GAAI,CAAA,EAAK,SAAA,wBAAA,CAEzD,CAAA,EAEJ,EAEFf,EAAAA,IAAC4E,GAAA,CACC,QAAQ,WACR,MAAM,UACN,KAAMrB,EACN,OAAO,SACP,IAAI,sBACJ,GAAI,CAAE,UAAW,YAAA,EAClB,SAAA,iBAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,EAKJzD,EAAAA,KAACqE,EAAA,CACC,UAAW,EACX,GAAI,CACF,GAAI,EACF,EAAG,CAAE,GAAI,EAAG,GAAI,CAAA,EAClB,aAAc,EACd,WACEpG,EAAM,QAAQ,OAAS,OACnB,4EACA,+DACN,eAAgB,YAAA,EAGlB,SAAA,CAAA+B,EAAAA,KAACkB,EAAA,CAAM,UAAU,MAAM,WAAW,SAAS,eAAe,gBAAgB,GAAI,CAAE,GAAI,CAAA,EAClF,SAAA,CAAAhB,EAAAA,IAACe,GAAW,QAAQ,KAAK,WAAY,IAAK,UAAU,KAAK,SAAA,iBAAA,CAEzD,SACCC,EAAA,CAAM,UAAU,MAAM,QAAS,EAAG,WAAW,SAC5C,SAAA,CAAAhB,MAACU,EAAA,CAAQ,MAAM,UACb,SAAAV,MAAC,OAAA,CACC,SAAAA,EAAAA,IAACoE,EAAA,CACC,aAAW,0BACX,KAAK,QACL,QAASnB,EACT,SAAUF,EAEV,SAAA/C,EAAAA,IAACqE,EAAA,CAAY,SAAS,OAAA,CAAQ,CAAA,CAAA,EAElC,CAAA,CACF,EACAvE,EAAAA,KAAC+E,GAAA,CACC,KAAK,QACL,UAAS,GACT,MAAOrB,EACP,SAAUE,EACV,aAAW,4BAEX,SAAA,CAAA1D,EAAAA,IAAC8E,EAAA,CAAa,MAAM,QAAQ,aAAW,aACrC,SAAA9E,EAAAA,IAAC+E,GAAA,CAAa,SAAS,OAAA,CAAQ,CAAA,CACjC,EACA/E,EAAAA,IAAC8E,EAAA,CAAa,MAAM,OAAO,aAAW,YACpC,SAAA9E,EAAAA,IAACgF,GAAA,CAAS,SAAS,OAAA,CAAQ,CAAA,CAC7B,CAAA,CAAA,CAAA,EAEFhF,EAAAA,IAACU,EAAA,CAAQ,MAAM,sBACb,SAAAV,EAAAA,IAACoE,EAAA,CACC,aAAW,sBACX,KAAK,QACL,UAAU,IACV,KAAK,+BACL,OAAO,SACP,IAAI,sBAEJ,SAAApE,EAAAA,IAACsE,EAAA,CAAc,SAAS,OAAA,CAAQ,CAAA,CAAA,CAClC,CACF,CAAA,CAAA,CACF,CAAA,EACF,EACCvB,GACC/C,EAAAA,IAACD,EAAA,CAAI,QAAQ,OAAO,eAAe,SAAS,GAAI,EAC9C,SAAAC,EAAAA,IAACmC,EAAA,CAAiB,KAAM,GAAI,EAC9B,EAEDa,GAAe,CAACD,GACfjD,EAAAA,KAACyE,EAAA,CAAM,SAAS,QAAQ,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,CAAA,mCACJvB,CAAA,EACnC,EAED,CAACD,GAAiB,CAACC,GAAeQ,IAAW,SAC5C1D,EAAAA,KAACC,EAAA,CAAI,GAAI,CAAE,GAAI,CAAA,EACb,SAAA,CAAAC,MAACvC,IAAY,OAAQoG,EAAe,SAAU,EAAG,cAAe,GAAI,QACnE/C,GAAA,EAAe,EACf+C,EAAc,SAAW,GACxB7D,EAAAA,IAACe,GAAW,QAAQ,QAAQ,GAAI,CAAE,QAAS,GAAK,GAAI,CAAA,EAAK,SAAA,qBAAA,CAEzD,CAAA,EAEJ,EAED,CAACgC,GAAiB,CAACC,GAAeQ,IAAW,QAC5C1D,EAAAA,KAAC0E,EAAA,CAAK,MAAK,GAAC,aAAW,oCAAoC,GAAI,CAAE,MAAO,QACrE,SAAA,CAAAX,EAAc,MAAM,EAAG,EAAE,EAAE,IAAKnF,GAC/BoB,OAACW,EAAM,SAAN,CACC,SAAA,CAAAT,EAAAA,IAACyE,EAAA,CACC,eAAc,GACd,gBACE/F,EAAI,IACFsB,EAAAA,IAACoE,EAAA,CACC,KAAK,MACL,aAAW,aACX,KAAK,QACL,KAAM1F,EAAI,IACV,OAAO,SACP,IAAI,sBAEJ,SAAAsB,EAAAA,IAACsE,EAAA,CAAc,SAAS,SAAA,CAAU,CAAA,CAAA,EAElC,KAGN,SAAAtE,EAAAA,IAAC0E,EAAA,CACC,QAAShG,EAAI,QACb,UAAW,GAAGA,EAAI,IAAI,GAAGA,EAAI,KAAO,MAAMA,EAAI,IAAI,GAAK,EAAE,MAAM0D,EAC7D1D,EAAI,SAAA,CACL,GACD,uBAAwB,CAAE,QAAS,OAAA,EACnC,yBAA0B,CAAE,QAAS,SAAA,CAAU,CAAA,CACjD,CAAA,EAEFsB,MAAC2E,GAAQ,UAAU,KAAK,GAAI,CAAE,QAAS,GAAI,CAAG,CAAA,GA3B3BjG,EAAI,EA4BzB,CACD,EACAmF,EAAc,SAAW,GACxB7D,EAAAA,IAACe,GAAW,QAAQ,QAAQ,GAAI,CAAE,QAAS,GAAK,GAAI,CAAA,EAAK,SAAA,qBAAA,CAEzD,CAAA,CAAA,CAEJ,CAAA,CAAA,CAAA,EAIJjB,EAAAA,KAACiB,EAAA,CAAW,QAAQ,QAAQ,GAAI,CAAE,GAAI,EAAG,QAAS,EAAA,EAAO,SAAA,CAAA,mIAEZ+B,EAAa,OAAO,oBAAkBI,EAAY,OAAO,YAAA,CAAA,CACtG,CAAA,CAAA,CAIA,CAAA,CACF,CAEJ"}